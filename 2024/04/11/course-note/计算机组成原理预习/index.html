<!DOCTYPE html>
<html lang="zh-cn,en,default">
<head>
  <meta charset="UTF-8">




<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

  <meta name="author" content="崔若晨 Ruochen Cui">


  <meta name="subtitle" content="崔若晨">


  <meta name="description" content="电子科技大学四年级本科生

A fourth year undergraduate student at UESTC
">


  <meta name="keywords" content="Ruochen Cui,崔若晨,Artificial Intelligence">


<title>2022-2023春季学期计算机组成原理期末预习笔记 | Ruochen Cui</title>



<link rel="icon" href="/web_ico.ico">


<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/katex/dist/katex.min.css"
/>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">


<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/css/search.css">



<script src="/lib/jquery.min.js"></script>


<script src="/lib/iconify-icon.min.js"></script>


<script src="https://cdn.tailwindcss.com?plugins=typography"></script>
<script>
  tailwind.config = {
    darkMode: "class",
  };
</script>

<script>
  (function () {
    const prefersDark =
      window.matchMedia &&
      window.matchMedia("(prefers-color-scheme: dark)").matches;
    const setting = localStorage.getItem("hexo-color-scheme") || "auto";
    if (setting === "dark" || (prefersDark && setting !== "light"))
      document.documentElement.classList.toggle("dark", true);
    let isDark = document.documentElement.classList.contains("dark");
  })();

  $(document).ready(function () {
    // init icon
    const prefersDark =
      window.matchMedia &&
      window.matchMedia("(prefers-color-scheme: dark)").matches;
    const isDark = document.documentElement.classList.contains("dark");
    $("#theme-icon").attr("icon", isDark ? "ic:round-dark-mode" : "ic:round-light-mode");

    function toggleGiscusTheme() {
      const isDark = document.documentElement.classList.contains("dark");
      const giscusFrame = document.querySelector("iframe.giscus-frame");
      if (giscusFrame) {
        giscusFrame.contentWindow.postMessage(
          {
            giscus: {
              setConfig: {
                theme: isDark ? "dark" : "light",
              },
            },
          },
          "https://giscus.app"
        );
      }
    }


    // toggle dark mode
    function toggleDark() {
      let isDark = document.documentElement.classList.contains("dark");
      const setting = localStorage.getItem("hexo-color-scheme") || "auto";
      isDark = !isDark;
      document.documentElement.classList.toggle("dark", isDark);
      $("#theme-icon").attr("icon", isDark ? "ic:round-dark-mode" : "ic:round-light-mode");
      if (prefersDark === isDark) {
        localStorage.setItem("hexo-color-scheme", "auto");
      } else {
        localStorage.setItem("hexo-color-scheme", isDark ? "dark" : "light");
      }
      toggleGiscusTheme();
    }
    $("#toggle-dark").click(toggleDark);

    // listen dark mode change
    window
      .matchMedia("(prefers-color-scheme: dark)")
      .addEventListener("change", (e) => {
        const setting = localStorage.getItem("hexo-color-scheme") || "auto";
        if (setting === "auto") {
          document.documentElement.classList.toggle("dark", e.matches);
          $("#theme-icon").attr(
            "icon",
            e.matches ? "ic:round-dark-mode" : "ic:round-light-mode"
          );
          toggleGiscusTheme();
        }
      });
  });
</script>




<meta name="generator" content="Hexo 7.1.1"><link href="https://cdn.bootcss.com/KaTeX/0.11.1/katex.min.css" rel="stylesheet" /></head>
<body 
  class="
    bg-[var(--c-0)]
    text-[var(--c-80)]
  ">
  <!-- The navigation bar -->
<header class="
    flex flex-row items-center
    w-full
    pr-4
    z-10
    border-b-[1px]
    border-b-[var(--c-border)]
    dark:bg-[var(--c-0)]
    dark:border-b-[var(--c-0)]
    gap-2
    h-[var(--h-header)]
    text-[var(--c-80)]
">
  <!-- Left part -->
  <div class="overflow-hidden h-full flex flex-row items-center">
    <!-- Site Title on the top left -->
    <a href="/" class="
            whitespace-nowrap
            text-2xl
            text-[var(--c-theme)]
            hover:text-[var(--c-theme)]
            pl-4
            font-black
            bg-gradient-to-r from-cyan-500
            to-blue-500 bg-clip-text text-transparent
          ">
      Ruochen Cui
    </a>
  </div>
  <!-- Div for pushing items to both sides -->
  <div class="flex-1"></div>
  <!-- Right part -->
  <div class="flex flex-row items-center z-20 h-full">
    <!-- Page links -->
    <div class="hidden sm:flex flex-row h-full">
      
      
      
      
      
      
      <a href="/./archives" class="
                        flex flex-row items-center
                        gap-1
                        hover:underline
                        hover:bg-[var(--c-20)]
                        hover:text-[var(--c-theme)]
                        transition-all
                        px-2
                        py-1
                        my-1
                        rounded-lg
                        group
                    ">
        
        <iconify-icon class="group-hover:scale-125 transition-transform" icon="mingcute:inbox-fill" width="22">
        </iconify-icon>
        
        
        <p>Posts</p>
        
      </a>
      
      
      
      
      
      
      <a href="/./publications" class="
                        flex flex-row items-center
                        gap-1
                        hover:underline
                        hover:bg-[var(--c-20)]
                        hover:text-[var(--c-theme)]
                        transition-all
                        px-2
                        py-1
                        my-1
                        rounded-lg
                        group
                    ">
        
        <iconify-icon class="group-hover:scale-125 transition-transform" icon="mingcute:science-fill" width="22">
        </iconify-icon>
        
        
        <p>Publications</p>
        
      </a>
      
      
      
      
      
      
      <a href="/./about" class="
                        flex flex-row items-center
                        gap-1
                        hover:underline
                        hover:bg-[var(--c-20)]
                        hover:text-[var(--c-theme)]
                        transition-all
                        px-2
                        py-1
                        my-1
                        rounded-lg
                        group
                    ">
        
        <iconify-icon class="group-hover:scale-125 transition-transform" icon="mingcute:user-info-fill" width="22">
        </iconify-icon>
        
        
        <p>About</p>
        
      </a>
      
      
      
      
      
      
      <a href="/./categories" class="
                        flex flex-row items-center
                        gap-1
                        hover:underline
                        hover:bg-[var(--c-20)]
                        hover:text-[var(--c-theme)]
                        transition-all
                        px-2
                        py-1
                        my-1
                        rounded-lg
                        group
                    ">
        
        <iconify-icon class="group-hover:scale-125 transition-transform" icon="mingcute:classify-2-fill" width="22">
        </iconify-icon>
        
        
        <p>Categories</p>
        
      </a>
      
      
      
      
      
      
      <a href="/./tags" class="
                        flex flex-row items-center
                        gap-1
                        hover:underline
                        hover:bg-[var(--c-20)]
                        hover:text-[var(--c-theme)]
                        transition-all
                        px-2
                        py-1
                        my-1
                        rounded-lg
                        group
                    ">
        
        <iconify-icon class="group-hover:scale-125 transition-transform" icon="mingcute:tag-fill" width="22">
        </iconify-icon>
        
        
        <p>Tags</p>
        
      </a>
      
      
      
      
      
      
      <a href="/./index" class="
                        flex flex-row items-center
                        gap-1
                        hover:underline
                        hover:bg-[var(--c-20)]
                        hover:text-[var(--c-theme)]
                        transition-all
                        px-2
                        py-1
                        my-1
                        rounded-lg
                        group
                    ">
        
        <iconify-icon class="group-hover:scale-125 transition-transform" icon="mingcute:home-2-fill" width="22">
        </iconify-icon>
        
        
      </a>
      
    </div>
    <!-- Icons on the right -->
    <div class="flex flex-row items-center">

      <!-- TODO: Add search icon here -->

      <!-- Dark/light toggle icon -->
      <a class="flex group p-1" title="toggle theme" id="toggle-dark">
        <iconify-icon class="transition-transform
                    group-hover:rotate-[45deg]
                    group-hover:scale-125
                    group-hover:text-[var(--c-theme)]" width="24" id="theme-icon">
        </iconify-icon>
      </a>
      <!-- Icon for dropout menu on small screens -->
      <div class="flex p-1 mx-1 sm:hidden">
        <a class="w-5 h-5" aria-hidden="true" id="open-menu">
          <iconify-icon width="24" icon="mingcute:menu-fill" class="transition-transform hover:scale-125 hover:rotate-[5deg]">
          </iconify-icon>
        </a>
        <a class="w-5 h-5 hidden" aria-hidden="true" id="close-menu">
          <iconify-icon width="24" icon="mingcute:close-circle-fill" class="transition-transform hover:scale-125 hover:rotate-[80deg]">
          </iconify-icon>
        </a>
      </div>
    </div>
  </div>
</header>

<!-- Dropdown menu on small screens -->
<div id="menu-panel" class="
        h-0
        overflow-hidden
        sm:hidden
        w-full
        z-10
        rounded
    ">
  <div id="menu-content" class="
        flex
        flex-row
        justify-center
        items-center
        font-bold
        text-xl
        border-b-[1px]
        relative
        z-20
        border-[var(--c-sep)]
        px-2
        py-2
        -translate-y-full
        transition-transform
        duration-200
        ">
    
    
    
    <a href="/./archives" class="
                flex flex-row items-center
                gap-2
                h-12
                hover:underline
                hover:bg-[var(--c-20)]
                px-3
                py-1
                rounded-lg
            ">
      <iconify-icon icon="mingcute:inbox-fill" width="22">
      </iconify-icon>
      <p>
        posts
      </p>
    </a>
    
    
    
    
    <a href="/./publications" class="
                flex flex-row items-center
                gap-2
                h-12
                hover:underline
                hover:bg-[var(--c-20)]
                px-3
                py-1
                rounded-lg
            ">
      <iconify-icon icon="mingcute:science-fill" width="22">
      </iconify-icon>
      <p>
        publications
      </p>
    </a>
    
    
    
    
    <a href="/./about" class="
                flex flex-row items-center
                gap-2
                h-12
                hover:underline
                hover:bg-[var(--c-20)]
                px-3
                py-1
                rounded-lg
            ">
      <iconify-icon icon="mingcute:user-info-fill" width="22">
      </iconify-icon>
      <p>
        about
      </p>
    </a>
    
    
    
    
    <a href="/./categories" class="
                flex flex-row items-center
                gap-2
                h-12
                hover:underline
                hover:bg-[var(--c-20)]
                px-3
                py-1
                rounded-lg
            ">
      <iconify-icon icon="mingcute:classify-2-fill" width="22">
      </iconify-icon>
      <p>
        categories
      </p>
    </a>
    
    
    
    
    <a href="/./tags" class="
                flex flex-row items-center
                gap-2
                h-12
                hover:underline
                hover:bg-[var(--c-20)]
                px-3
                py-1
                rounded-lg
            ">
      <iconify-icon icon="mingcute:tag-fill" width="22">
      </iconify-icon>
      <p>
        tags
      </p>
    </a>
    
    
    
    
    <a href="/./index" class="
                flex flex-row items-center
                gap-2
                h-12
                hover:underline
                hover:bg-[var(--c-20)]
                px-3
                py-1
                rounded-lg
            ">
      <iconify-icon icon="mingcute:home-2-fill" width="22">
      </iconify-icon>
      <p>
        home
      </p>
    </a>
    
    
  </div>
</div>
  <main>
    <!-- css -->

<link rel="stylesheet" href="/lib/fancybox/fancybox.min.css">

  
<link rel="stylesheet" href="/lib/tocbot/tocbot.min.css">

    <!-- toc -->
    
  <!-- tocbot -->
<nav class="post-toc toc text-sm w-40 relative top-32 right-4 opacity-70 hidden lg:block" style="position: fixed !important;"></nav>


<section class="px-6 max-w-prose mx-auto md:px-0">
  <!-- Post header before content -->
  <header class="py-4">
    <div class="flex flex-col gap-2 pt-4 md:pt-6">
      <!-- Title -->
      <div id="article-title" class="leading-snug">
        <p class="text-3xl font-bold text-[var(--c-100)] mb-4">2022-2023春季学期计算机组成原理期末预习笔记</p>
      </div>
      <!-- Meta data -->
      <div>
        <section class="
          flex flex-col gap-x-2 gap-y-1 text-sm text-[var(--c-100)]">
          <div class="flex flex-wrap items-center gap-x-2 gap-y-1">
            <!-- Dates -->
            <div class="flex items-center gap-1">
              <iconify-icon width="18" icon="mingcute:add-circle-fill" ></iconify-icon>
              Created: <time class="w-max">2024-04-11</time>
            </div>
            <div class="flex items-center gap-1">
              <iconify-icon width="18" icon="mingcute:refresh-3-fill" ></iconify-icon>
              Edited: <time class="w-max">2024-10-14</time>
            </div>
          </div>
          <div class="flex flex-wrap items-center gap-x-3 gap-y-3">
            <!-- Author -->
            
              <span class="flex items-center gap-1 group">
                <iconify-icon width="18" icon="mingcute:user-edit-fill" ></iconify-icon>
                <p>myself</p>
              </span>
            

            <!-- Word count -->
            <span class="flex items-center gap-1">
              <iconify-icon width="18" icon="mingcute:book-2-fill" ></iconify-icon>
              <span>14.2k words, 51 min</span>
            </span>
            <!-- Categories -->
            
              <!-- <span class="text-gray-400">·</span> -->
              <span class="flex flex-row items-center gap-1 group hover:underline">
                <iconify-icon class="transition-all group-hover:scale-125 mr-0"
                  width="18"
                  icon="mingcute:classify-2-fill">
                </iconify-icon>
                <a class="article-category-link" href="/categories/%E7%AC%94%E8%AE%B0/">笔记</a>
              </span>
            
          </div>
        </section>
      </div>
      <!-- tags -->
      <div>
        
<div class="flex flex-wrap gap-1">
  
    
      <a href="/tags/course-note/" 
        class="
          tag
          text-sm
          rounded-full
          px-[5px]
          border-[1px]
          border-[var(--c-theme)]
          text-[var(--c-theme)]
          bg-[var(--c-0)]
          dark:bg-[var(--c-0)]
          dark:drop-shadow-none
          hover:bg-[var(--c-theme)]
          hover:text-[var(--c-0)]
          dark:hover:text-[var(--c-theme-2)]
        ">
        course-note
      </a>
    
      <a href="/tags/cs/" 
        class="
          tag
          text-sm
          rounded-full
          px-[5px]
          border-[1px]
          border-[var(--c-theme)]
          text-[var(--c-theme)]
          bg-[var(--c-0)]
          dark:bg-[var(--c-0)]
          dark:drop-shadow-none
          hover:bg-[var(--c-theme)]
          hover:text-[var(--c-0)]
          dark:hover:text-[var(--c-theme-2)]
        ">
        cs
      </a>
    
  
</div>
      </div>
    </div>
  </header>
  <!-- content -->
  <article class="post-content prose m-auto dark:prose-invert">
    <p>[TOC]</p>
<h2 id="第1章-计算机系统概述">第1章 计算机系统概述</h2>
<ul>
<li>
<p>计算机发展历程</p>
</li>
<li>
<p>计算机系统的基本组成</p>
</li>
<li>
<p>计算机系统的层次结构</p>
</li>
<li>
<p>计算机系统性能评价</p>
<h3 id="计算机的发展历程">计算机的发展历程</h3>
</li>
</ul>
<p>第一代计算机：真空管计算机 十进制运算1946 ENIAC</p>
<p>第二代计算机：晶体管计算机 内存由磁芯构成 外存为磁鼓与磁带</p>
<p>第三代计算机：中小规模集成电路计算机</p>
<p>​		IBM 360：兼容机（相同或相似的指令集与操作系统）</p>
<p>​				好处：原来机器上的程序可以不改动而在新机器上运行，但性能不同</p>
<p>​				关键：“向后兼容”，低端机指令集是高端机的一个子集</p>
<p>​		DEC PDP-8：总线结构</p>
<p>​				好处：可扩充性好，节省器件，体积小，价格便宜</p>
<p>第四代计算机：大规模集成电路计算机</p>
<p>​		特点：共享存储器，分布式存储器及大规模并行处理系统</p>
<p>​		半导体存储器，微处理器</p>
<p><strong>冯·诺依曼结构</strong>：</p>
<p>​		1945年冯·诺依曼提出“存储程序”思想：将事先编号的程序和原始数据送入主存中；启动执行后，不需要干预即可自动逐条取出指令和执行指令。1946年开始设计“存储程序”计算机。</p>
<p>​		主要思想：①计算机组成：运算器、控制器、存储器、输入设备、输出设备</p>
<pre><code>								- 运算器：加减乘除基本算术运算、逻辑运算和附加运算
								- 控制器：自动执行指令
								- 存储器：存放数据、存放指令
</code></pre>
<p>​		内部以二进制表示指令和数据：指令（操作码指出操作类型，地址码指出操作地址），一串指令组成程序</p>
<p>​		“存储程序”的工作方式</p>
<p>​		IAS计算机是现代计算机的原型机（IAS 1946年设计的计算机）</p>
<h3 id="计算机系统的组成">计算机系统的组成</h3>
<ul>
<li>计算机硬件：CPU+ MM +I/O</li>
<li>计算机软件：系统软件+应用软件</li>
</ul>
<p>计算机：能对数字化信息进行自动、告诉的算术和逻辑运算的处理装置</p>
<p>基本部件和功能</p>
<ul>
<li>运算器（数据运算）：ALU、GPRs、标志寄存器等</li>
<li>存储器（数据存储）：存储阵列、地址译码器、读写控制电路</li>
<li>总线（数据传送）：数据线（MDR）、地址线（MAR）和控制线</li>
<li>控制器（控制）：对指令译码生成控制信号</li>
</ul>
<p>冯诺依曼结构计算机模型：</p>
<p><img src="C:%5CUsers%5Ccrc%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20230609115147826.png" alt="image-20230609115147826"></p>
<p>认识计算机中最基本的部件：</p>
<p><img src="C:%5CUsers%5Ccrc%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20230609191357586.png" alt="image-20230609191357586"></p>
<p>CPU：中央处理器  PC：程序计数器  MAR：存储器地址寄存器</p>
<p>ALU：算术逻辑部件  IR：指令寄存器  MDR：存储器数据寄存器</p>
<p>GPRs：通用寄存器组（若干通用寄存器组成，早期就是累加器）</p>
<p><strong>“存储程序”工作方式</strong></p>
<p>程序由指令组成：</p>
<ul>
<li>数据和指令事先存放在存储器，每条指令和每个数据都有地址，指令按序存放，指令由OP、ADDR字段组成，程序起始地址送入PC</li>
<li>开始执行程序：</li>
<li>
<ul>
<li>① 分局PC取指令送IR：PC-&gt;MAR，存储器-&gt;MDR-&gt;IR
<ul>
<li>② 指令译码：IR-&gt;控制器，在控制器中译码</li>
<li>③ 取操作数：从GPRs或存储器-&gt;ALU</li>
<li>④ 执行指令指定的具体操作：ALU中完成</li>
<li>⑤ 回写结果到GPRs或存储器</li>
<li>⑥ 修改PC的值，使其指向下一条指令</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>程序启动前，指令和数据都存放在存储器中，都是0/序列；指令执行过程中，指令和数据被从存储器取到CPU，存放在CPU的寄存器中：指令在IR中，数据在GPR中</p>
<p>指令的信息：</p>
<ul>
<li>操作码——指示该指令要完成什么操作，eg加减法</li>
<li>一个或多个源操作数（立即数、寄存器编号、存储地址）</li>
<li>目的操作数地址（寄存器编号、存储地址）</li>
</ul>
<p>存储地址的描述与操作数的数据结构有关</p>
<p><strong>软件</strong></p>
<ul>
<li>系统软件</li>
<li>
<ul>
<li>操作系统：硬件资源管理，用户接口
<ul>
<li>语言处理系统 主要有编译器和汇编器 建立在操作系统之上</li>
<li>
<ul>
<li>编译器和汇编器生成的目标程序由机器级代码组成
<ul>
<li>操作系统通过指令直接对硬件进行编程控制</li>
<li>翻译程序有三类：汇编程序、编译程序、解释程序</li>
</ul>
</li>
</ul>
</li>
<li>其他实用程序</li>
</ul>
</li>
</ul>
</li>
<li>应用软件</li>
</ul>
<p><strong>软件和硬件的界面：ISA</strong></p>
<p>ISA处于硬件与软件的交界面，ISA是对硬件的抽象，所有软件功能建立在ISA之上</p>
<h3 id="计算机系统的层次结构">计算机系统的层次结构</h3>
<p><img src="C:%5CUsers%5Ccrc%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20230609195949041.png" alt="image-20230609195949041"></p>
<p>任何高级语言程序最终通过执行若干条指令来完成</p>
<p>程序执行结果取决于①算法程序编写 ②语言处理系统、操作系统、ISA、为体系结构</p>
<p>计算机系统抽象层的功能转换：上层是下层的抽象，下层是上层的实现（底层为上层提供支撑环境）</p>
<p><strong>ISA指令集体系结构：规定如何使用硬件</strong></p>
<ul>
<li>可执行的指令集合</li>
<li>指令接受的操作数类型</li>
<li>操作数所能存放的寄存器组结构</li>
<li>操作数所能存放的存储空间大小和编址方式</li>
<li>操作数大端/小端方式存放</li>
<li>指令对操作数的寻址方式</li>
<li>指令执行过程的控制方式</li>
</ul>
<p>ISA是计算机系统中必不可少的一个抽象层，ISA是计算机组成的抽象</p>
<p>同一种ISA可以有不同的计算机组成，不同ISA规定的指令集不同，计算机组成要能够实现ISA规定的功能</p>
<p>ISA和计算机组成（微结构）间的关系：</p>
<p><img src="C:%5CUsers%5Ccrc%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20230609203254753.png" alt="image-20230609203254753"></p>
<h3 id="计算机系统的性能评价">计算机系统的性能评价</h3>
<h4 id="衡量计算机性能的基本指标">衡量计算机性能的基本指标</h4>
<p>响应时间（执行时间、等待时间）：作业提交到作业完成的时间</p>
<p>吞吐率：单位时间完成的工作量 某些场合也叫带宽</p>
<h4 id="计算机性能测量：执行时间">计算机性能测量：执行时间</h4>
<p>系统性能和CPU性能不等价，有一定区别，本章主要讨论CPU性能，即CPU执行时间——执行一个程序中全部指令所花的时间，它是计算机的基本性能评价指标</p>
<p>CPU执行时间的计算有关时钟周期、时钟频率和CPI</p>
<ul>
<li>
<p>时钟频率：CPU主频</p>
</li>
<li>
<p>CPI：每条指令执行的时钟周期数 CPI=CPU时钟周期数÷指令条数 CPI一般用来衡量ISA的综合性能</p>
</li>
<li>
<p><strong>CPU执行时间计算</strong></p>
</li>
<li>
<ul>
<li>
<p>CPU时钟周期数 × 时钟周期</p>
<ul>
<li>CPU时钟周期数 ÷ 时钟频率</li>
<li>CPI × 指令条数 × 时钟周期</li>
<li>
<ul>
<li>CPI的计算：CPI = （CPU时间×时钟频率）/指令条数 = 总时钟周期数/指令条数</li>
</ul>
</li>
</ul>
<p>频率的提高和速度的提高并不是成比例的</p>
</li>
</ul>
</li>
<li>
<p>CPU时间：CPU真正花在执行该程序的时间</p>
</li>
<li>
<ul>
<li>
<p>用户CPU时间</p>
<ul>
<li>系统CPU时间</li>
</ul>
<p>其他时间：等待I/O操作完成或CPU花在其他用户程序的时间</p>
</li>
</ul>
</li>
</ul>
<p><strong>指令执行速度指标MIPS和MFLOPS</strong></p>
<p>MIPS：每秒执行多少百万条指令（定点数指令）——MIPS总是一个平均值（不能反应性能的好坏）</p>
<p>MIPS = 时钟频率/CPI × 1/10<sup>6</sup></p>
<p>MFLOPS：每秒能执行多少百万次（10^6^）浮点数运算，反应机器对浮点数处理的速度</p>
<p><strong>性能评价程序——基准程序Benchmarks</strong></p>
<p>公用的基准测试程序：SPEC</p>
<p>基准程序中最好包含编译器，避免编译器产生的特殊作用</p>
<p><strong>Amdahl阿姆达尔定律</strong></p>
<p>基本思想：对系统中某部分（软件或硬件）更新带来的系统性能改进成都，取决于该部分被使用的频率或其执行时间占总执行时间的比例。</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>改进后的指令时间</mtext><mo>=</mo><mfrac><mtext>改进部分执行时间</mtext><mtext>改进部分的改进倍数</mtext></mfrac><mo>+</mo><mtext>未改进部分执行时间</mtext></mrow><annotation encoding="application/x-tex">改进后的指令时间 = \frac{改进部分执行时间}{改进部分的改进倍数} + 未改进部分执行时间</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord cjk_fallback">改</span><span class="mord cjk_fallback">进</span><span class="mord cjk_fallback">后</span><span class="mord cjk_fallback">的</span><span class="mord cjk_fallback">指</span><span class="mord cjk_fallback">令</span><span class="mord cjk_fallback">时</span><span class="mord cjk_fallback">间</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.217331em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.872331em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">改</span><span class="mord cjk_fallback mtight">进</span><span class="mord cjk_fallback mtight">部</span><span class="mord cjk_fallback mtight">分</span><span class="mord cjk_fallback mtight">的</span><span class="mord cjk_fallback mtight">改</span><span class="mord cjk_fallback mtight">进</span><span class="mord cjk_fallback mtight">倍</span><span class="mord cjk_fallback mtight">数</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">改</span><span class="mord cjk_fallback mtight">进</span><span class="mord cjk_fallback mtight">部</span><span class="mord cjk_fallback mtight">分</span><span class="mord cjk_fallback mtight">执</span><span class="mord cjk_fallback mtight">行</span><span class="mord cjk_fallback mtight">时</span><span class="mord cjk_fallback mtight">间</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord cjk_fallback">未</span><span class="mord cjk_fallback">改</span><span class="mord cjk_fallback">进</span><span class="mord cjk_fallback">部</span><span class="mord cjk_fallback">分</span><span class="mord cjk_fallback">执</span><span class="mord cjk_fallback">行</span><span class="mord cjk_fallback">时</span><span class="mord cjk_fallback">间</span></span></span></span> 或</p>
<p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mtext>整体改进倍数</mtext><mo>=</mo><mfrac><mn>1</mn><mrow><mtext>改进部分时间比例</mtext><mi mathvariant="normal">/</mi><mtext>改进部分的改进倍数</mtext><mo>+</mo><mtext>未改进部分时间比例</mtext></mrow></mfrac></mrow><annotation encoding="application/x-tex">整体改进倍数 = \frac{1}{改进部分时间比例/改进部分的改进倍数+未改进部分时间比例}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord cjk_fallback">整</span><span class="mord cjk_fallback">体</span><span class="mord cjk_fallback">改</span><span class="mord cjk_fallback">进</span><span class="mord cjk_fallback">倍</span><span class="mord cjk_fallback">数</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.365108em;vertical-align:-0.52em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">改</span><span class="mord cjk_fallback mtight">进</span><span class="mord cjk_fallback mtight">部</span><span class="mord cjk_fallback mtight">分</span><span class="mord cjk_fallback mtight">时</span><span class="mord cjk_fallback mtight">间</span><span class="mord cjk_fallback mtight">比</span><span class="mord cjk_fallback mtight">例</span><span class="mord mtight">/</span><span class="mord cjk_fallback mtight">改</span><span class="mord cjk_fallback mtight">进</span><span class="mord cjk_fallback mtight">部</span><span class="mord cjk_fallback mtight">分</span><span class="mord cjk_fallback mtight">的</span><span class="mord cjk_fallback mtight">改</span><span class="mord cjk_fallback mtight">进</span><span class="mord cjk_fallback mtight">倍</span><span class="mord cjk_fallback mtight">数</span><span class="mbin mtight">+</span><span class="mord cjk_fallback mtight">未</span><span class="mord cjk_fallback mtight">改</span><span class="mord cjk_fallback mtight">进</span><span class="mord cjk_fallback mtight">部</span><span class="mord cjk_fallback mtight">分</span><span class="mord cjk_fallback mtight">时</span><span class="mord cjk_fallback mtight">间</span><span class="mord cjk_fallback mtight">比</span><span class="mord cjk_fallback mtight">例</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.52em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span>		可以表示为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>p</mi><mo>=</mo><mfrac><mn>1</mn><mrow><mi>t</mi><mi mathvariant="normal">/</mi><mi>n</mi><mo>+</mo><mn>1</mn><mo>−</mo><mi>t</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">p = \frac{1}{t/n+1-t}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">p</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.365108em;vertical-align:-0.52em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.845108em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">t</span><span class="mord mtight">/</span><span class="mord mathdefault mtight">n</span><span class="mbin mtight">+</span><span class="mord mtight">1</span><span class="mbin mtight">−</span><span class="mord mathdefault mtight">t</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.52em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></p>
<hr>
<h2 id="第二章-数据的机器级表示">第二章 数据的机器级表示</h2>
<ul>
<li>数值数据的表示</li>
<li>非数值数据的表示</li>
<li>数据的宽度</li>
<li>数据的存储和【排列顺序</li>
<li>数据的检错与纠错</li>
</ul>
<h3 id="数值数据的表示">数值数据的表示</h3>
<h4 id="定点数的表示">定点数的表示</h4>
<p>进位计数制</p>
<p>定点数的二进制编码</p>
<p>定点整数的表示——无符号整数、带符号整数</p>
<h4 id="浮点数的表示">浮点数的表示</h4>
<p>浮点数格式和表示范围</p>
<p>浮点数的规格化</p>
<p>IEEE754浮点数标准——单精度浮点数 双精度浮点数 特殊数的表示形式</p>
<h4 id="十进制数的表示">十进制数的表示</h4>
<p>ASCII码表示</p>
<p>BCD码表示</p>
<p><strong>信息的二进制编码</strong></p>
<p>机器级数据——数值数据（无符号整数、带符号整数、浮点数、十进制数）、非数值数据（逻辑数、西文字符和汉字）</p>
<p>机器数和真值</p>
<h4 id="数值数据的表示方法">数值数据的表示方法</h4>
<ul>
<li>
<p>数值数据表示的三要素——进位计数制、定点/浮点、编码方式（源码、补码、反码、移码）</p>
</li>
<li>
<p>移码表示——每个数值加一个偏置常数</p>
</li>
<li>
<ul>
<li>标准移码——编码位数n，bias = 2^n-1^——E~移~ = E + 2^3^
<ul>
<li>主要用来表示浮点数的阶码——原因：便于浮点数加减运算时的对接操作（比较大小）</li>
</ul>
</li>
</ul>
</li>
<li>
<p>无符号整数</p>
<p>​		LSB：高到低位从左到右（Least 常用）		MSB：高到低位从右到左（Most）</p>
</li>
<li>
<p>带符号数，定点整数</p>
<p>​		MSB表示数的符号</p>
<ul>
<li>多种定点编码方式：</li>
<li>
<ul>
<li>原码（常用来表示浮点数的尾数）
<ul>
<li>反码（不用于数值数据）</li>
<li>补码（表示带符号数、定点整数）</li>
<li>移码（表示浮点数的指数）</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>带符号数与无符号数的比较</p>
<ul>
<li>扩充操作差异：无符号数0扩展（高的空位补0） 带符号整数符号扩展（空的高位补符号位）</li>
<li>比较差异：无符号数MSB为1的数比MSB为0的数大	带符号数……小（移码除外）</li>
<li>溢出判断有差异：最高位无溢出时，不产生“溢出异常”错误</li>
</ul>
</li>
<li>
<p>科学计数法与浮点数</p>
<ul>
<li>规格化形式：小数点前只有一位非0数</li>
<li>对于二进制数：0.101 × 2^-10^   其中：0.101是尾数 2是基数 -10是阶码</li>
<li>基数采用默认值无需表示，对尾数和指数分别编码，就可以表示一个浮点数</li>
</ul>
</li>
</ul>
<p><img src="C:%5CUsers%5Ccrc%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20230610105607845.png" alt="image-20230610105607845"></p>
<h4 id="ieee754浮点数格式">IEEE754浮点数格式</h4>
<p><img src="C:%5CUsers%5Ccrc%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20230610113723312.png" alt="image-20230610113723312"></p>
<p>S：0正1负</p>
<p>规格化数：+/-1.xx…x ×2^E^</p>
<p>阶码/指数E——移码表示（非标准移码）</p>
<ul>
<li>
<p>偏移值为：2^7^-1 = 127（单精度）		2^10^-1 = 1023（双精度）</p>
</li>
<li>
<p>阶码取值范围：-127~128，移码为0000 0000 ~ 1111 1111</p>
</li>
<li>
<p>规格化数的阶码取值范围：阶码全为0和全为1用来表示特殊值，</p>
<p>​					则阶码取值：0000 0001（-126）~ 1111 1110（127）</p>
</li>
</ul>
<p>​							（不用128为偏移码是因为-126~127能表示的最大浮点数变小了）</p>
<p>尾数：</p>
<ul>
<li>规格化尾数最高位总是1，被隐含表示，省了1位</li>
<li>实际尾数位数：1+23 = 24bits（单精度）         1+52=53bits（双精度）</li>
</ul>
<p><strong>单精度：（-1）^S^×（1+M）× 2^(E-127)^</strong></p>
<p><strong>双精度：（-1）^S^ ×（1+M）× 2^(E-1023)^</strong></p>
<h4 id="特殊数据表示-阶码或尾数为全0或全1">特殊数据表示（阶码或尾数为全0或全1）</h4>
<table>
<thead>
<tr>
<th style="text-align:center">指数</th>
<th style="text-align:center">尾数</th>
<th style="text-align:center">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">1~254</td>
<td style="text-align:center">任意（隐含整数1）</td>
<td style="text-align:center">一般数据</td>
</tr>
<tr>
<td style="text-align:center">0</td>
<td style="text-align:center">0</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">0</td>
<td style="text-align:center">非零</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">255（全1）</td>
<td style="text-align:center">0</td>
<td style="text-align:center"></td>
</tr>
<tr>
<td style="text-align:center">255（全1）</td>
<td style="text-align:center">非零</td>
<td style="text-align:center"></td>
</tr>
</tbody>
</table>
<p>0的表示</p>
<p>​		指数全0，尾数全0，符号位可取0和1</p>
<p>±<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">∞</mi></mrow><annotation encoding="application/x-tex">\infty</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord">∞</span></span></span></span>的表示</p>
<p>​		浮点数运算中，除数为0的结果是±<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">∞</mi></mrow><annotation encoding="application/x-tex">\infty</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord">∞</span></span></span></span>（整数除0会发生溢出异常）</p>
<p>​		可以利用±<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">∞</mi></mrow><annotation encoding="application/x-tex">\infty</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord">∞</span></span></span></span>作比较，也有一些运算需要<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">∞</mi></mrow><annotation encoding="application/x-tex">\infty</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord">∞</span></span></span></span></p>
<p>​		表示：指数全1，尾数全0</p>
<p>非零NAN的表示</p>
<p>​		指数全1，位数非0，常用于程序调试过程</p>
<h4 id="非规格化数">非规格化数</h4>
<p>​		大于0小于2^-126^的部分</p>
<p>​		单精度非规格数的阶码为全0时，真值为-126，而非-127</p>
<p>​		尾数表示中没有隐含的“1”，隐含的整数是“0”，即为一个纯小数</p>
<h4 id="十进制数的表示">十进制数的表示</h4>
<p>​		①ASCII码表示      ②BCD码表示</p>
<h4 id="ascii码表示十进制数">ASCII码表示十进制数</h4>
<p>​		前分隔数字串：正负号用数字串前的一个字节表示，+ ——2BH，- ——2DH</p>
<p><img src="C:%5CUsers%5Ccrc%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20230610145904886.png" alt="image-20230610145904886"></p>
<p>​		后嵌入数字串：符号嵌入最低位数字的ASCII码高四位中，比“前分隔”节省一个字节</p>
<p>​				嵌入方式：正数不变，负数高四位变为0111</p>
<p><img src="C:%5CUsers%5Ccrc%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20230610150152967.png" alt="image-20230610150152967"></p>
<p>​		ASCII码缺点：占空间大，需要转换成二进制数或BCD码才能计算</p>
<h4 id="bcd码-8421码-表示十进制数">BCD码（8421码）表示十进制数</h4>
<p>​		编码思想：每位十进制数用4位二进制数表示</p>
<p>​		编码方案：0000~1001表示0~9</p>
<p>​		符号表示：“+”——1100，“-”——1101</p>
<p><img src="C:%5CUsers%5Ccrc%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20230610151920912.png" alt="image-20230610151920912"></p>
<hr>
<h3 id="非数值数据表示">非数值数据表示</h3>
<h4 id="逻辑数据的编码表示">逻辑数据的编码表示</h4>
<p>​		表示：N位二进制数表示N个逻辑数据</p>
<p>​		运算：按位进行		eg.按位与，按位或，逻辑左移，逻辑右移</p>
<p>​		识别：指令识别</p>
<p>​		位串：表示若干个状态位或控制位</p>
<h4 id="西文字符的编码表示">西文字符的编码表示</h4>
<p>​		特点：对有限个字母、数学符号和标点符号等字符编码</p>
<p>​		表示（常用编码为7位ASCII码）：</p>
<ul>
<li>十进制数10个</li>
<li>英文字符52个</li>
<li>专用符号33个</li>
<li>控制符号33个</li>
</ul>
<p>​		操作：字符串操作，如传送、比较等</p>
<h4 id="汉字及国际字符的编码表示">汉字及国际字符的编码表示</h4>
<p>​		编码形式：</p>
<ul>
<li>输入码：如键盘输入</li>
<li>内码：系统中存储、查找、传送，至少两个字节才能表示一个汉字内码</li>
<li>字模点阵或轮廓描述：描述图像和图形，用于显示/打印。直线向量轮廓、曲线轮廓。所有汉字字形预先存在机内，不同字体对应不同字库</li>
</ul>
<hr>
<h3 id="数据的宽度">数据的宽度</h3>
<p>比特、字节（位组）、字</p>
<p>现代计算机中，存储器按字节编址，LSB表示最低有效字节，MSB表示最高有效字节</p>
<p>字：被处理信息的单位，用来度量数据类型的宽度（字和字长的宽度可以相等，可以不等）</p>
<p>字长：定点运算时数据通路的宽度			字长 = CPU内部总线的宽度，或运算器的位数，或通用寄存器的宽度</p>
<p>数据通路：CPU内部进行数据运算、存储和传送的路径以及路径上的部件</p>
<h4 id="数据量的度量单位">数据量的度量单位</h4>
<p>b比特 B字节	MBps 兆字节/秒</p>
<h4 id="程序中数据类型的宽度">程序中数据类型的宽度</h4>
<p>不同机器上表示的同一种类型的数据可能宽度不同</p>
<p>各种类型数据分配的字节数随机器字长和编译器的不同而不同</p>
<h3 id="数据的存储和排列顺序-大小端和边界对齐">数据的存储和排列顺序——大小端和边界对齐</h3>
<p>字的存放问题和字的边界对齐问题</p>
<p>存放方式：</p>
<ul>
<li>
<p>小端方式：LSB所在的地址是数的地址——低字节放低地址</p>
</li>
<li>
<p>大端方式：MSB所在的地址是数的地址——高字节放低地址</p>
<p><img src="C:%5CUsers%5Ccrc%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20230610164726061.png" alt="image-20230610164726061"></p>
<p>例题：</p>
<p><img src="C:%5CUsers%5Ccrc%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20230610165536966.png" alt="image-20230610165536966"></p>
</li>
</ul>
<p>字节交换问题——不同系统间通信可能会发生问题</p>
<p><strong>对齐</strong>：要求数据存放的地址必须是相应的边界地址+</p>
<p>不同长度的数据存放时，有两种处理方式：</p>
<ul>
<li>
<p>按边界对齐（假定存储字的宽度为32位，按字节编址）-&gt;每四个字节可同时读写</p>
<ul>
<li>字地址：4的倍数（低两位为0）</li>
<li>半字地址：2的倍数（低位为0）</li>
<li>字节地址：任意</li>
</ul>
</li>
<li>
<p>不按边界对齐</p>
<p>可能会增加访存次数（某种程度上会节省空间）</p>
</li>
</ul>
<p>举个栗子：</p>
<p><img src="C:%5CUsers%5Ccrc%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20230610172417759.png" alt="image-20230610172417759"></p>
<h3 id="数据的检错与纠错">数据的检错与纠错</h3>
<p>解决问题措施：</p>
<ul>
<li>计算机硬件的可靠性：eg.电路、电源、布线等各方面采取必要的措施，提高计算机的抗干扰能力</li>
<li>采取数据检错和校正措施，自动发现并纠错</li>
</ul>
<p>如何进行错误检测与校正：<strong>“冗余校验”</strong></p>
<p>​		除原数据信息外，还增加若干位编码，称为校验位。数据检/纠错原理示意图：</p>
<p><img src="C:%5CUsers%5Ccrc%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20230610172850154.png" alt="image-20230610172850154"></p>
<ol>
<li>没有检测到错误，得到的数据位直接传送</li>
<li>检测到差错，可以纠正。数据位和比较结果一起送入纠错器，得到正确数据位并传送出去</li>
<li>检测到错误，但无法确认哪位出错，因而不能纠错处理，报告出错情况</li>
</ol>
<p>​		常用校验码：奇偶校验吗、海明校验码、循环冗余校验码</p>
<hr>
<h2 id="第三章-运算方法和运算部件">第三章 运算方法和运算部件</h2>
<h3 id="第三章第一讲-高级语言与机器语言涉及的运算及alu">第三章第一讲 高级语言与机器语言涉及的运算及ALU</h3>
<p>高级语言程序中涉及的运算</p>
<ul>
<li>整数算术运算、浮点数算术运算</li>
<li>按位、逻辑、移位、位扩展和位截断</li>
</ul>
<p>指令集中涉及到的计算</p>
<ul>
<li>定点数运算
<ul>
<li>带符号整数运算</li>
<li>无符号整数运算</li>
</ul>
</li>
<li>逻辑运算
<ul>
<li>逻辑操作</li>
<li>移位操作</li>
</ul>
</li>
<li>基本运算部件ALU的设计</li>
</ul>
<p><strong>C语言程序中涉及到的计算</strong></p>
<ul>
<li>
<p>按位运算</p>
<ul>
<li>用途：对位串实现掩码操作或或相应的其他操作（主要用于对多媒体数据或状态/控制信息将进行处理）</li>
<li>|按位或	&amp;按位与	~取反	^异或</li>
</ul>
</li>
<li>
<p>逻辑运算</p>
<ul>
<li>用途：关系表示的运算</li>
<li>||	&amp;&amp;	！</li>
<li>与按位与的区别
<ul>
<li>运算过程不同：按位/整体</li>
<li>结果类型不同：位串/逻辑值</li>
</ul>
</li>
</ul>
</li>
<li>
<p>移位运算</p>
<ul>
<li>
<p>用途：提取部分信息、扩大或缩小数值的2/4/8/2^n^倍</p>
</li>
<li>
<p>操作：左移x&lt;&lt;k		右移x&gt;&gt;k</p>
</li>
<li>
<p>不区别是逻辑移位还是算术移位，由x的类型确定</p>
<ul>
<li>
<p>x为无符号数：逻辑移位——高（低）位移出，低（高）位补0，高位左移1发生溢出</p>
</li>
<li>
<p>x为带符号数：算术移位——左移：高位移出，低位补0，移出位不等于新符号位则溢出</p>
<p>​											 右移：低位移出，高位补符号，可能有效数据丢失</p>
</li>
</ul>
</li>
<li>
<p>位扩展和位截断运算</p>
<ul>
<li>数据类型转换可能会出现数据扩展或截断操作，根据类型转换前后数据的长短确定是扩展还是截断</li>
<li>扩展：短转长——无符号数0扩展，前面补0；带符号整数符号扩展，前面补符号</li>
<li>截断：长转短——强行将高位丢弃，可能发生溢出</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img src="C:%5CUsers%5Ccrc%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20230610205333453.png" alt="image-20230610205333453"></p>
<p><img src="C:%5CUsers%5Ccrc%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20230610205356394.png" alt="image-20230610205356394"></p>
<p>计算机如何实现高级语言程序中的运算</p>
<ul>
<li>将各类表达式编译为指令序列</li>
<li>计算机直接执行指令来完成运算</li>
</ul>
<p><strong>MIPS运算</strong></p>
<p>​		MIPS定点算术运算指令	±*/</p>
<p>​		MIPS逻辑运算指令			按位与/按位或/按位或非/左移/右移</p>
<p>​		MIPS定点比较和分支指令	大小比较和相等比较（减法运算实现“比较”操作）</p>
<p>​		MIPS定点数据传送指令		加/减/符号扩展/0扩展</p>
<p>​		MIPS浮点算术运算指令		MIPS提供专门的浮点数寄存器	±*/</p>
<p>​		MIPS浮点数传送指令			加/减/符号扩展/0扩展	还涉及定点操作：加/减（地址运算）</p>
<p>​		MIPS浮点数比较和分支指令	比较操作（减法实现）	还涉及定点操作：加/减（地址运算）</p>
<p>实现MIPS定点和浮点运算指令的思路：先实现一个能进行基本加减运算和基本逻辑运算，并生成基本条件码（ZF/OF/CF/NF）的ALU，再由ALU和移位器实现乘、除、浮点运算器</p>
<hr>
<h4 id="alu-运算部件的核心">ALU——运算部件的核心</h4>
<p>ALU核心部分是加法器，可可进行基本的加减算术运算和逻辑运算。</p>
<h5 id="串行进位加法器">串行进位加法器</h5>
<p>​		缺点：进位按串行方式传递，速度慢</p>
<p>​		n位串行加法器从C0到Cn的延迟时间为：2n级门延迟		最后一位和数的延迟时间为：2（n-1）+3 = 2n+1级门延迟</p>
<p>​		与/或门延迟为1ty，异或门3ty——Carryout延迟为2ty，Sum延迟为6ty</p>
<p><img src="C:%5CUsers%5Ccrc%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20230610223301054.png" alt="image-20230610223301054"></p>
<p><img src="C:%5CUsers%5Ccrc%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20230610223433014.png" alt="image-20230610223433014"></p>
<p><img src="C:%5CUsers%5Ccrc%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20230610223251328.png" alt="image-20230610223251328"></p>
<h5 id="并行进位加法器-cla加法器">并行进位加法器（CLA加法器）</h5>
<p>先行进位方式——串行进位加法器采用串行逐级传递进位，电路延迟与位数成正比关系，故采用先行进位方式</p>
<p>如何产生先行进位：</p>
<ul>
<li>
<p>定义辅助函数：G~i~=A~i~B~i~…进位生成函数		P~i~=A~i~+B~i~（1ty）进位传递函数（或P~i~=A~i~<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>⨁</mo></mrow><annotation encoding="application/x-tex">\bigoplus</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.00001em;vertical-align:-0.25001em;"></span><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">⨁</span></span></span></span>B~i~，3ty）</p>
<p>实现以上逻辑的电路称为进位生成/传递部件</p>
<ul>
<li>全加逻辑方程：S~i~=P~i~<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>⨁</mo></mrow><annotation encoding="application/x-tex">\bigoplus</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.00001em;vertical-align:-0.25001em;"></span><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">⨁</span></span></span></span>C~i~（仅P~i~=A~i~<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>⨁</mo></mrow><annotation encoding="application/x-tex">\bigoplus</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.00001em;vertical-align:-0.25001em;"></span><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">⨁</span></span></span></span>B~i~，3ty）	C~i+1~=G~i~+P~i~C~i~（i=0,1,…n）（2ty）</li>
<li>各进位之间无等待，相互独立并同时产生。实现上述逻辑的电路为4位CLA部件</li>
<li>根据全加逻辑方程，并行求出各位和</li>
</ul>
</li>
</ul>
<p>CLA加法器由“进位生成/传递部件”、“CLA部件”和“求和部件”构成</p>
<p><strong>全先行进位加法器</strong></p>
<p>成本高</p>
<p><img src="C:%5CUsers%5Ccrc%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20230610232052826.png" alt="image-20230610232052826"></p>
<p>上图和的总延迟：3+2+3=8ty（只能用P~i~=A~i~<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>⨁</mo></mrow><annotation encoding="application/x-tex">\bigoplus</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.00001em;vertical-align:-0.25001em;"></span><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">⨁</span></span></span></span>B~i~），进位C~8~的延迟：1+2=3ty或3+2=5ty</p>
<p><strong>局部先行进位加法器</strong>（单级先行进位加法器）</p>
<p>用多个位数较少的n位全先行进位加法器进行串联</p>
<p><img src="C:%5CUsers%5Ccrc%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20230610233519560.png" alt="image-20230610233519560"></p>
<p>所有和数的延迟：3+2+2+5=12ty——其实就是最高的8位和的延迟：</p>
<ul>
<li>C8：3ty</li>
<li>C8——C16：2ty（不考虑进位生成/传递部件的1ty，因为C8的延迟大于1ty）</li>
<li>C16——C24:2ty</li>
<li>C24——和[31:14]：5ty（CLA部件2ty+求和部件3ty）</li>
</ul>
<p>单级先行进位加法器虽然比行波加法器延迟时间短，但高位组进位依赖低位组进位，仍有较长的时间延迟</p>
<p><strong>多级先行进位加法器</strong></p>
<p>引入组进位生成/传递函数实现“组内并行，组间串行”进位方式</p>
<p><img src="C:%5CUsers%5Ccrc%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20230610235127673.png" alt="image-20230610235127673"></p>
<p>把实现以上逻辑的电路称为4位BCLA部件。举例：</p>
<p><img src="C:%5CUsers%5Ccrc%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20230611001827654.png" alt="image-20230611001827654"></p>
<p>关键路径长度——5+2+3=10ty</p>
<ul>
<li>5ty = CLA部件2ty+求和部件3ty——4位CLA加法器</li>
<li>2ty——4位BCLA部件</li>
<li>3ty——4为CLA加法器的求和部件</li>
</ul>
<p>最终进位延迟——3+2=5ty</p>
<h5 id="4-bit-alu">4-bit ALU</h5>
<p>通过MUX可以实现与、或和加的操作，其他运算操作可以通过增加逻辑电路来实现</p>
<p>1-bit基本ALU：</p>
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230611002925363.png" alt="image-20230611002925363" style="zoom: 33%;" />
<p>4-bit串行ALU：</p>
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230611003051873.png" alt="image-20230611003051873" style="zoom:33%;" />
<p>​		关键路径延迟长，速度慢，不能计算除法</p>
<p>​		改进：使用并行加法器来构建ALU</p>
<h4 id="第三章第一讲小结">第三章第一讲小结</h4>
<p><img src="C:%5CUsers%5Ccrc%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20230611003504569.png" alt="image-20230611003504569"></p>
<hr>
<h3 id="第三章第二讲-定点数运算及运算部件">第三章第二讲 定点数运算及运算部件</h3>
<ul>
<li>
<p>加/减运算及其运算部件</p>
<p>补码、原码、移码 加减运算</p>
</li>
<li>
<p>乘法运算及其运算部件</p>
<p>原码、补码 乘法运算</p>
<p>快速乘法器（自学）</p>
</li>
<li>
<p>除法运算及其运算部件（自学）</p>
<p>原码、补码 除法运算</p>
<p>快速除法器</p>
</li>
<li>
<p>定点运算器</p>
</li>
</ul>
<h4 id="n位整数加-减运算器的逻辑构成">n位整数加/减运算器的逻辑构成</h4>
<p>复习：定点整数的机器数是补码形式，[x+y]~补~ = [x]~补~+[y]~补~，[x-y] = [x]~补~+[-y]~补~</p>
<p>​		实现减法的主要工作：求[-y]~补~——[-y]~补~ = <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mrow><mo stretchy="false">[</mo><mi>y</mi><msub><mo stretchy="false">]</mo><mtext>补</mtext></msub></mrow><mo stretchy="true">‾</mo></mover></mrow><annotation encoding="application/x-tex">\overline{[y]_{补}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2000000000000002em;vertical-align:-0.25em;"></span><span class="mord overline"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.9500000000000001em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mclose"><span class="mclose">]</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">补</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.87em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.25em;"><span></span></span></span></span></span></span></span></span> + 1，这一过程也称为求补</p>
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230611105806421.png" alt="image-20230611105806421" style="zoom: 33%;" />
<p>有n位，是模2^n^运算系统</p>
<p>当加/减运算电路的结果超出表示范围，即溢出时，结果是错误的——解决：带标志位的加/减运算电路</p>
<h4 id="带标志位的加-减运算电路">带标志位的加/减运算电路</h4>
<p>比较大小——在加法器中做减法实现，需要使用标志信息来判断大小。整数加/减运算部件（含标志位）：</p>
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230611122137563.png" alt="image-20230611122137563" style="zoom: 33%;" />
<p>无符号整数和带符号整数的加/减运算电路完全一样，这个运算电路称为整数加/减运算部件（含标志位）</p>
<p>在整数加减运算部件基础上，加上寄存器、移位器和控制逻辑，就可实现ALU、乘除运算以及浮点运算</p>
<p><strong>n位加法器的标志信息的产生</strong></p>
<ul>
<li>溢出标志OF：OF = C~n~<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>⨁</mo></mrow><annotation encoding="application/x-tex">\bigoplus</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.00001em;vertical-align:-0.25001em;"></span><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">⨁</span></span></span></span>C~n-1~</li>
<li>符号标志SF：SF = F~n-1~</li>
<li>零标志位ZF：ZF = 1当且仅当F=0</li>
<li>进位/借位标志CF：CF = C~out~<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>⨁</mo></mrow><annotation encoding="application/x-tex">\bigoplus</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.00001em;vertical-align:-0.25001em;"></span><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">⨁</span></span></span></span>SUB 或 CF = C~out~<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>⨁</mo></mrow><annotation encoding="application/x-tex">\bigoplus</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.00001em;vertical-align:-0.25001em;"></span><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">⨁</span></span></span></span>C~in~</li>
</ul>
<p>加法时为C~out~，减法时为C~out~取反</p>
<p><img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230611111851479.png" alt="image-20230611111851479" style="zoom:50%;" /><img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230611111859497.png" alt="image-20230611111859497" style="zoom: 50%;" /></p>
<p>所有运算电路的核心：</p>
<ul>
<li>计算机中所有算术运算都基于加法器实现</li>
<li>加法器本身不知道所运算的是带符号数还是无符号数</li>
<li>加法器不判定对错，总是取低n位作为结果，并生成标志信息</li>
</ul>
<p><strong>条件标志位（条件码CC）的保存</strong></p>
<p>为什么要生成并保存条件标志：为了在分支指令（条件转移指令）中被用作是否转移执行的条件</p>
<p>条件标志：在运算电路中产生，被记录到专门的寄存器中</p>
<p>​		零标志ZF，溢出标志OF，进/借位标志CF，符号标志SF</p>
<p>程序/状态字寄存器或标志寄存器：存放标志的寄存器</p>
<p>​		每个标志对应标志寄存器中的一个标志位</p>
<p><strong>算术逻辑部件（ALU）</strong></p>
<p>进行基本算术运算与逻辑运算（无/带符号加/减，与、或、非、异或等逻辑运算）</p>
<p>核心电路——整数加/减运算部件</p>
<p>有一个操作控制端（ALUop），用来决定ALU所执行的处理功能</p>
<p>​		ALUop的位数k决定了操作的种类数</p>
<p>​		eg. 当位数k为3时，ALU最多有2^3^=8种操作</p>
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230611123629480.png" alt="image-20230611123629480" style="zoom: 67%;" />
<h4 id="补码加-减运算-直接用整数加减部件实现">补码加/减运算——直接用整数加减部件实现</h4>
<p>发生溢出时会出现两个现象：</p>
<ul>
<li>最高位和次高位的进位不同			   OF = C~n~<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>⨁</mo></mrow><annotation encoding="application/x-tex">\bigoplus</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.00001em;vertical-align:-0.25001em;"></span><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">⨁</span></span></span></span>C~n-1~</li>
<li>和的符号位和加数的符号位不同		OF = X~n-1~Y~n-1~<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><msub><mi>F</mi><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msub><mo stretchy="true">‾</mo></mover></mrow><annotation encoding="application/x-tex">\overline{F_{n-1}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.091661em;vertical-align:-0.208331em;"></span><span class="mord overline"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8833300000000001em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.13889em;">F</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:-0.13889em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.80333em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span> + <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><msub><mi>X</mi><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msub><mo stretchy="true">‾</mo></mover></mrow><annotation encoding="application/x-tex">\overline{X_{n-1}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.091661em;vertical-align:-0.208331em;"></span><span class="mord overline"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8833300000000001em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:-0.07847em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.80333em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span> <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><msub><mi>Y</mi><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msub><mo stretchy="true">‾</mo></mover></mrow><annotation encoding="application/x-tex">\overline{Y_{n-1}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.091661em;vertical-align:-0.208331em;"></span><span class="mord overline"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8833300000000001em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault" style="margin-right:0.22222em;">Y</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:-0.22222em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span><span style="top:-3.80333em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span>F~n-1~</li>
</ul>
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230611124601985.png" alt="image-20230611124601985" style="zoom: 33%;" />
<h4 id="原码加-减运算">原码加/减运算</h4>
<p>用于浮点数尾数运算</p>
<p>符号位和数值部分分开处理</p>
<p>仅对数值部分进行加减运算，符号位起判断和控制作用</p>
<p>规则如下：</p>
<ul>
<li>比较两数符号，对加法执行“同号求和，异号求差”，对减法执行“异号求和，同号求差”</li>
<li>求和：数值位相加，和的符号取被加数（或被减数）的符号。若最高位进位，则溢出</li>
<li>求差：加数（或减数）求补后与被加数（被减数）相加
<ul>
<li>a. 最高位产生进位（C~out~=1）则无借位（CF=0），表示够减，结果为正，结果即“差”的数值位原码</li>
<li>b. 最高位无进位（C~out~）则CF=1，结果为负，是“差”的数值位的补码形式，需对结果求补，还原为原码形式的数值位</li>
<li>差的符号位：
<ul>
<li>对于a.，符号位取被加数（被减数）的符号</li>
<li>对于b.，符号位为被加数（被减数）的符号取反</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>举个栗子：</p>
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230611130154920.png" alt="image-20230611130154920" style="zoom: 33%;" />
<h4 id="移码加-减运算">移码加/减运算</h4>
<p>应用：浮点数的阶码运算</p>
<p>符号位和数值部分可以一起处理</p>
<p>用n位的ALU对两个移码表示的数进行加/减运算：</p>
<ul>
<li>
<p>[E1]~移~ + [E2]~移~ = 2^n-1^ + E1 + 2^~^n-1^ + E2 = 2^n^ + E1 + E2 = [E1 + E2]~补~</p>
</li>
<li>
<p>[E1]~移~ - [E2]~移~ = [E1]~移~ + [-[E2]~移~]~补~ = 2~n-1~ + E1 + 2^n^ - [E2]~移~ = 2^n^ + E1 - E2 = [E1-E2]~补~</p>
<p>移码的和/差等于和/差的补码</p>
<p>和/差的移码——符号位取反、数值位相同</p>
</li>
<li>
<p>运算规则（针对标准移码）</p>
<ul>
<li>加法：[E1]~移~和[E2]~移~进行模2^n^加，然后对结果的符号取反</li>
<li>减法：先将减数[E2]~移~求补（各位取反，末位加1），然后再与被减数[E1]~移~进行模2^n^相加，最后对结果的符号取反</li>
<li>溢出判断：进行模2^n^相加时，如果两个加数的符号相同，并且与和数的符号也相同，则发生溢出（因为和是补码，加数是移码）</li>
</ul>
</li>
</ul>
<p>举个栗子（n=4）：</p>
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230611145520910.png" alt="image-20230611145520910" style="zoom:33%;" />
<h4 id="无符号数的乘法运算">无符号数的乘法运算</h4>
<p>假定[X]~原~ = x~0~x~1~…x~n~，[Y]~原~=y~0~y~1~…y~n~，求[X×Y]~原~			数值部分z~1~…z~2n~ = (0.x~1~…x~n~) × (0.y~1~…y~n~)</p>
<p>小数点位置可以约定，则整数乘法与小数乘法原理相同</p>
<p>手算过程——两种操作：左移，加法，因此可用ALU和移位器来实现乘法运算</p>
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230611151820988.png" alt="image-20230611151820988" style="zoom:33%;" />
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230611152406707.png" alt="image-20230611152406707" style="zoom:33%;" />
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230611153956093.png" alt="image-20230611153956093" style="zoom:33%;" />
<p>举个栗子：</p>
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230611154033279.png" alt="image-20230611154033279" style="zoom:33%;" />
<h4 id="原码乘法算法">原码乘法算法</h4>
<p>用于浮点数尾数乘法运算</p>
<p>符号与数值分开处理：积符由异或得到，数值用无符号乘法运算</p>
<p>举个栗子：</p>
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230611154841467.png" alt="image-20230611154841467" style="zoom: 33%;" />
<ul>
<li>原码一位乘法：每次只取乘数的一位判断，需n次循环，速度慢</li>
<li>原码两位乘法：每次取乘数两位判断，只需n/2次循环，快一倍</li>
</ul>
<h4 id="mips中乘数的乘-除运算处理">MIPS中乘数的乘/除运算处理</h4>
<p>指令：mult，multu；div，divu</p>
<p>MIPS中有一对32位寄存器Hi与Lo</p>
<p>乘法和除法运算的硬件相同</p>
<ul>
<li>仅需加减和64位寄存器的左右移位</li>
<li>Hi和Lo结合起来实现64位寄存器
<ul>
<li>乘法：Hi中存放高32位积，Lo中存放低32位积</li>
<li>除法：Hi中存放余数，Lo中存放商</li>
</ul>
</li>
</ul>
<p>mflo/mfhi指令用来把Lo/Hi中的32位数据取到通用寄存器</p>
<p>两种乘法指令忽略溢出，由软件自行处理溢出</p>
<ul>
<li>软件通过mfhi指令取出Hi寄存器来判断是否溢出</li>
<li>溢出判断规则：Hi中为以下数值时不溢出，否则溢出
<ul>
<li>无符号数乘指令（multu）时：全0</li>
<li>带符号数乘（mult）时：Lo中的符号</li>
</ul>
</li>
</ul>
<p>MIPS指令不处理“除数为0”，软件自行处理</p>
<h4 id="定点运算部件">定点运算部件</h4>
<p>所有运算可通过“加”和“移位”操作实现（ALU+移位器+若干寄存器+控制逻辑）</p>
<p>运算部件通常指ALU、移位器、寄存器组，加上用于数据选择的多路选择器和实现数据传送的总线等构成的一个运算数据通路</p>
<ul>
<li>用多个芯片级联实现更长字长运算</li>
<li>运算部件和控制键都做在CPU中，CPU中有多个运算空间</li>
</ul>
<p>“运算器”、“运算部件”、“功能部件”、“执行部件”、“数据通路”含义上一样，只是侧重点不同</p>
<h4 id="第三章第二讲小结">第三章第二讲小结</h4>
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230611160442764.png" alt="image-20230611160442764" style="zoom:33%;" />
<hr>
<h3 id="第三章第三讲-浮点数运算">第三章第三讲 浮点数运算</h3>
<ul>
<li>浮点数加减运算</li>
<li>浮点数乘除运算</li>
<li>浮点数运算的精度问题</li>
</ul>
<p>对阶操作：使两数阶码相等</p>
<ul>
<li>原则：小阶向大阶看齐（0.560×10^2^ -&gt;0.000560×10^5^）</li>
<li>方法：阶小的数尾数右移，右移位数等于阶码差</li>
<li>IEEE 754位数右移时，隐含的“1”移到小数部分，高位补0，移出的低位保留到特定的“附加位”上</li>
</ul>
<h4 id="浮点数加-减运算">浮点数加/减运算</h4>
<p>如何对阶：通过计算<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mi mathvariant="normal">Δ</mi><mi>E</mi><msub><mo stretchy="false">]</mo><mtext>补</mtext></msub></mrow><annotation encoding="application/x-tex">[\Delta E]_{补}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">Δ</span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span><span class="mclose"><span class="mclose">]</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.32833099999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord cjk_fallback mtight">补</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>来判断阶差</p>
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230611161451896.png" alt="image-20230611161451896" style="zoom:33%;" />
<p>何时无法判断阶差：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Δ</mi><mi>E</mi></mrow><annotation encoding="application/x-tex">\Delta E</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">Δ</span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span></span></span></span>产生溢出时</p>
<p>对IEEE754 SP格式来说，|<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Δ</mi><mi>E</mi></mrow><annotation encoding="application/x-tex">\Delta E</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">Δ</span><span class="mord mathdefault" style="margin-right:0.05764em;">E</span></span></span></span>|大于多少时，结果等于阶大的数：24</p>
<p>​		1.xx…x -&gt; 0.00…01xx…x（SP的尾数长23位，右移24位后，尾数为0）</p>
<p><strong>浮点数加减法的基本要点：</strong></p>
<p>​		假定Mx、My分别是X和Y的尾数，Ex和Ey分别是X和Y的阶码</p>
<ul>
<li>求阶差：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Δ</mi></mrow><annotation encoding="application/x-tex">\Delta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">Δ</span></span></span></span>E = Ey - Ex（假定Ey&gt;Ex，则结果的阶码为Ey）</li>
<li>对阶：Mx右移<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Δ</mi></mrow><annotation encoding="application/x-tex">\Delta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">Δ</span></span></span></span>E位，尾数变为Mx * 2^Ex-Ey^（保留右移部分：附加位）</li>
<li>尾数加减：Mx * 2^Ex-Ey^ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>±</mo></mrow><annotation encoding="application/x-tex">\pm</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord">±</span></span></span></span> My		注意：需要让隐含的位参加运算</li>
<li>规格化：
<ul>
<li>尾数高位为0，需左规：尾数左移一位，阶码减1，直到MSB为1，每次阶码减1后要判断阶码是否下溢</li>
<li>尾数最高位有进位，需右规：尾数右移一位，阶码加1，直到MSB为1，每次阶码加1后要判断阶码是否上溢</li>
<li>阶码溢出异常处理：阶码上溢，结果溢出；阶码下溢，结果为0</li>
</ul>
</li>
<li>若尾数比规定位数长，需考虑舍入（有多种舍入方式）</li>
<li>若运算结果尾数为0，阶码也置0</li>
</ul>
<p>举个栗子：</p>
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230611163648491.png" alt="image-20230611163648491" style="zoom:33%;" />
<p><strong>计算机内部执行浮点数加减运算的问题</strong></p>
<ul>
<li>如何表示——IEEE754标准</li>
<li>如何判断阶码大小——求[<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">Δ</mi></mrow><annotation encoding="application/x-tex">\Delta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">Δ</span></span></span></span>E]~补~</li>
<li>对阶时尾数右移隐含位1——右移到数值部分，高位补0，低位部分移出到附加位，附加位包括保护位、舍入位和粘位，共三位</li>
<li>如何进行尾数加减——隐藏位还原后，按原码进行加减运算，附加位一起算</li>
<li>何时/如何规格化——
<ul>
<li>$\pm$1x.xx…x形式，右规：尾数右移1位，阶码加1</li>
<li>$\pm$0.0…01x…x形式，左规：尾数左移k位，阶码减k</li>
</ul>
</li>
<li>如何舍入——去掉附加位时考虑舍入</li>
<li>如何判断溢出——阶码全1，上溢；阶码全0，下溢</li>
</ul>
<p><strong>IEEE754浮点数加法运算举例：</strong></p>
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230611164833368.png" alt="image-20230611164833368" style="zoom:33%;" />
<p><strong>尾数的舍入处理</strong></p>
<p>尾数右移时保留了附加位，并参与运算，最终需要去掉附加位</p>
<p>四种舍入方式：</p>
<ul>
<li>就近舍入：舍入为最近可表示的数（中间值是100，大入小舍）
<ul>
<li>若非中间值：LSB后1位 0舍1入</li>
<li>若为中间值：强迫结果为偶数，LSB=0时直接截断，LSB=1时LSB加1</li>
</ul>
</li>
<li>向+<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">∞</mi></mrow><annotation encoding="application/x-tex">\infty</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord">∞</span></span></span></span>方向舍入：正向舍入</li>
<li>向-<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="normal">∞</mi></mrow><annotation encoding="application/x-tex">\infty</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord">∞</span></span></span></span>方向舍入：负向舍入</li>
<li>向0方向舍入：直接截取所需位，后面的位丢弃</li>
</ul>
<p><strong>浮点数加减的溢出判断</strong></p>
<ul>
<li>左规（阶码减1）时：判断阶码或阶码减1是否全为0，是则置阶码下溢</li>
<li>右规（阶码加1）时：判断阶码或阶码加1是否全为0，是则置阶码上溢</li>
<li>减1——[Z-1]~移~ = Z~移~ + 255</li>
</ul>
<h4 id="浮点数乘-除法基本要点">浮点数乘/除法基本要点</h4>
<p>浮点数尾数采用原码乘/除运算</p>
<p>浮点数乘法：x * y = (M~x~ * M~y~) × 2^Ex+Ey^ = M~b~ × 2^Eb^</p>
<p>浮点数除法：x / y = (Mx / My) × 2^Ex-Ey^ = M~b~ × 2^Eb^</p>
<p>浮点数乘/除发步骤：</p>
<ol>
<li>
<p>求阶：Ex <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>±</mo></mrow><annotation encoding="application/x-tex">\pm</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord">±</span></span></span></span> Ey <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>∓</mo></mrow><annotation encoding="application/x-tex">\mp</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord">∓</span></span></span></span> 127</p>
</li>
<li>
<p>尾数相乘除：Mx *或/ My          （两个形为1.xxx的数相乘/除）</p>
</li>
<li>
<p>两数符号相同，结果为正；两数符号相异，结果为负</p>
</li>
<li>
<p>尾数高位为0，左规；最高位为进位，右规</p>
<p>乘法不需左规，最多右规1次；除法不需右规，最多左规1次</p>
</li>
<li>
<p>若尾数比规定的长，考虑舍入（方法和加减法一致）</p>
</li>
<li>
<p>若尾数为0，阶码置零</p>
</li>
<li>
<p>阶码溢出判断</p>
</li>
</ol>
<p><strong>浮点数乘除的溢出判断</strong></p>
<ul>
<li>乘法运算求阶码的和时：
<ul>
<li>若Ex和Ey最高位皆1，而结果E~b~的最高位是0或为全1，阶码上溢</li>
<li>若Ex和Ey最高位皆0，而结果E~b~的最高位是1或为全0，阶码下溢</li>
</ul>
</li>
<li>除法运算求阶码的差时：
<ul>
<li>若Ex的最高位是1，Ey的最高位是0，结果E~b~的最高位是0或为全1，阶码上溢</li>
<li>若Ex的最高位是0，Ey的最高位是1，结果E~b~的最高位是1或为全0，阶码下溢</li>
</ul>
</li>
</ul>
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230611194831719.png" alt="image-20230611194831719" style="zoom:33%;" />
<h4 id="求阶码的和-差">求阶码的和、差</h4>
<p>设Ex和Ey分别是两个操作数的阶码，Eb是结果的阶码：</p>
<ul>
<li>
<p>阶码加法公式：E~b~ = Ex + Ey + 129</p>
  <img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230611195431145.png" alt="image-20230611195431145" style="zoom:33%;" />
</li>
<li>
<p>阶码减法公式：E~b~ = Ex + [-Ey~补~] + 127</p>
  <img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230611195453144.png" alt="image-20230611195453144" style="zoom:33%;" />
</li>
</ul>
<p>举个栗子：</p>
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230611195612654.png" alt="image-20230611195612654" style="zoom:33%;" />
<h4 id="第三章第三讲小结">第三章第三讲小结</h4>
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230611195716262.png" alt="image-20230611195716262" style="zoom: 50%;" />
<hr>
<h2 id="第四章-指令系统">第四章 指令系统</h2>
<h3 id="第四章第一讲-指令系统的设计">第四章第一讲 指令系统的设计</h3>
<p>指令：由操作码和操作数（或其地址码）组成</p>
<ul>
<li>操作码：定义操作的类型</li>
<li>操作数：指示操作的源和目的</li>
</ul>
<p>一条指令必须显示或隐式地包含以下信息</p>
<ul>
<li>操作码：指定操作类型</li>
<li>源操作数或其地址：一个或多个源操作数所在的地址</li>
<li>结果的地址：产生的结果存放和粗（目的操作数）</li>
<li>下一条指令地址：下条指令存放何处</li>
</ul>
<h4 id="指令的地址码字段">指令的地址码字段</h4>
<p>​		不同机器系统不同，同一指令系统中不同指令也可能不同</p>
<ul>
<li>
<p>零地址指令：无需操作数/操作数是默认位置</p>
<p><img src="C:%5CUsers%5Ccrc%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20230611222037566.png" alt="image-20230611222037566"></p>
</li>
<li>
<p>一地址指令：地址既是操作数的地址，也是结果的地址         单目/双目运算</p>
<p><img src="C:%5CUsers%5Ccrc%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20230611222050090.png" alt="image-20230611222050090"></p>
</li>
<li>
<p>二地址指令（CISC中最常用）：存放双目运算中两个操作数，一个地址作为结果的地址</p>
<p><img src="C:%5CUsers%5Ccrc%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20230611222103650.png" alt="image-20230611222103650"></p>
</li>
<li>
<p>三地址指令（RISC风格）：双目运算中两个源操作数的地址和一个结果的地址</p>
<p><img src="C:%5CUsers%5Ccrc%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20230611222116914.png" alt="image-20230611222116914"></p>
</li>
<li>
<p>多地址指令：成批数据处理的指令</p>
  <img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230611222356874.png" alt="image-20230611222356874" style="zoom:33%;" />
  <img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230611222625143.png" alt="image-20230611222625143" style="zoom:33%;" />
<p><strong>操作数类型和存储方式</strong></p>
<p>基本类型有：</p>
<ul>
<li>地址（指针）</li>
<li>数值数据</li>
<li>位、位串、字符和字符串：表示文本、声音和图像</li>
<li>逻辑（布尔）数据：按位操作</li>
</ul>
<h4 id="寻址方式-根据地址找到指令或操作数的方法">寻址方式——根据地址找到指令或操作数的方法</h4>
<p>指令中的地址码编码由操作数的寻址方式决定</p>
<p>地址码编码的三个原则：</p>
<ul>
<li>地址码尽量短——目标代码短，省空间</li>
<li>操作数存放位置灵活，空间尽量大——利于编译器优化产生高效代码</li>
<li>地址计算过程简单——指令执行快</li>
</ul>
<p>指令的寻址方式——简单</p>
<ul>
<li>顺序执行：PC增值</li>
<li>跳转：与操作数的某些寻址方式相同</li>
</ul>
<p>操作数的寻址方式——复杂——通常“寻址方式”指这个</p>
<ul>
<li>操作数来源：寄存器/主（虚）存/外设端口/栈顶</li>
<li>操作数结构：位/字节/半字/字/双字/一维表/二维表/…</li>
</ul>
<p>指令表示寻址方式：</p>
<ol>
<li>不设专门的寻址方式位         如MIPS</li>
<li>在指令中设置专门的寻址方式位</li>
</ol>
<p>有效地址：操作数所在存储单元的地址（逻辑或物理），可通过指令的寻址方式和地址码得到</p>
<p><strong>基本寻址方式：立即、直接、间接、寄存器、寄存器间接、偏移、堆栈</strong></p>
  <img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230611224116283.png" alt="image-20230611224116283" style="zoom:33%;" />
<p>​		只有当操作数在存储器中时，才有可能“缺页”，此时操作数在磁盘中</p>
<p>偏移寻址方式</p>
<p>​		偏移寻址：EA = A + ®，R可以明显/隐式给出，可以为PC、基址寄存器B、变址寄存器I</p>
<ul>
<li>
<p>相对寻址：EA = A + (PC)                      相对于当前指令处位移量为A的单元</p>
<p>​		指令地址码给出一个偏移量（带符号数），基准地址隐含由PC给出</p>
<p>​		可用来实现程序（公共子程序）的浮动 或 指定转移目标地址</p>
</li>
<li>
<p>基址寻址：EA = A + (B)                         相对于基址(B)处位移量为A的单元</p>
<p>​		指令地址码给出一个偏移量，基准地址明显或隐含由基址寄存器B给出</p>
<p>​		可用来实现多道程序重定位 或 过程调用中参数的访问</p>
</li>
<li>
<p>变址寻址：EA = A + (I)                           相对于首址A处位移量为(I)的单元</p>
<p>​		指令地址码给出一个基准地址，偏移量（无符号数）明显或隐含由变址寄存器I给出</p>
<p>​		可为循环重复操作提供一种高效机制，如实现对线性表的方便操作</p>
</li>
<li>
<p>自动变址：EA = (I) + A</p>
<p>​		指令中的地址码A给定数组首址，变址器I每次自动加/减数组元素的长度x</p>
<p>​		RISC机器不提供自动变址寻址，将变址和基址寻址统一成一种偏移寻址方式</p>
</li>
</ul>
  <img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230611224851084.png" alt="image-20230611224851084" style="zoom:33%;" />
</li>
</ul>
<h4 id="操作码编码方式">操作码编码方式</h4>
<p>操作码编码方式：</p>
<ul>
<li>定长操作码编码</li>
<li>扩展操作码编码（变长操作码编码）</li>
</ul>
<p>选择依据：</p>
<ul>
<li>代码长度更重要时：变长指令字、变长操作码</li>
<li>性能更重要时：定长指令字、定长操作码</li>
</ul>
<p><strong>定长操作码编码</strong></p>
<p>基本思想：指令的操作码部分采用固定长度的编码</p>
<p>特点：译码方便，可能有信息冗余</p>
<p>举例：</p>
<ul>
<li>IBM360/370采用：</li>
<li>8位定长操作码，最多有256条指令</li>
<li>只提供了183条指令，有73种编码为冗余信息</li>
<li>机器字长32位，按字节编址</li>
<li>有16个32位通用寄存器，基址器B和变址器X可用其中任意一个</li>
</ul>
<p>通用寄存器编号有4位，B和X编号占4位</p>
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230611230320495.png" alt="image-20230611230320495" style="zoom:33%;" />
<p><strong>扩展（变长）操作码编码</strong></p>
<p>基本思想：将操作码的编码长度分成几种固定长的格式。被大多数指令集采用，PDP-11典型</p>
<p>种类：</p>
<ul>
<li>等长扩展法：4-8-12；3-6-9</li>
<li>不等长扩展法</li>
</ul>
<p>举例：</p>
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230611230746282.png" alt="image-20230611230746282" style="zoom:33%;" />
<p><strong>条件测试方法</strong></p>
<p><strong>条件转移指令</strong>通常根据Condition Codes（条件码CC/状态码/标志位）转移</p>
<p>​		一般通过执行算术指令或比较指令，然后用测试指令来检测CC</p>
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230611233150566.png" alt="image-20230611233150566" style="zoom: 50%;" />
<p>常用的标志（条件码）有四种：</p>
<ol>
<li>
<p>SF - negative</p>
</li>
<li>
<p>OP - overflow</p>
</li>
<li>
<p>CF - 进位/错位</p>
<p>借位生成：C~out~<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>⨁</mo></mrow><annotation encoding="application/x-tex">\bigoplus</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.00001em;vertical-align:-0.25001em;"></span><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">⨁</span></span></span></span>sub</p>
</li>
<li>
<p>ZF - zero</p>
</li>
</ol>
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230611233248642.png" alt="image-20230611233248642" style="zoom:50%;" />
<p>标志可存于标志寄存器（也叫条件码寄存器、状态寄存器、程序状态字寄存器），也可由指定的通用寄存器来存放标志位</p>
<p>可以将两条指令合成一条指令，即：计算并转移</p>
<p><img src="C:%5CUsers%5Ccrc%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20230611233351090.png" alt="image-20230611233351090"></p>
<p><strong>指令系统设计风格——不同操作数地址指定方式</strong></p>
<ul>
<li>累加器型：一个操作数（源操作数1）和目的操作数总在累加器中</li>
<li>堆栈型：总是将栈顶连个该操作数进行运算，指令无需指定操作数地址</li>
<li>通用寄存器类型：操作数可以是寄存器或存储器数据（A、B、C可以是寄存器或存储单元）</li>
<li>装入/存储型：运算指令的操作数只能是寄存器数据，只有load/store能访问存储器</li>
</ul>
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230611233759179.png" alt="image-20230611233759179" style="zoom: 33%;" />
<p>对于复杂表达式，累加器型风格指令条数变多</p>
<p>寄存器型（后两种）占主导地位，原因：①寄存器速度快，使用大量通用寄存器可减少访存操作 ②表达式编译时与顺序无关（相对Stack）</p>
<p><strong>复杂指令集计算机CISC与精简指令集计算机RISC</strong></p>
<p>2/8规律：</p>
<ul>
<li>简单指令占程序80%，占指令系统20%</li>
<li>微程序控制的计算机中，程序只占指令总数20%的复杂指令占用了控制存储器容量的80%</li>
</ul>
<p>1975年开始研究指令系统的合理性问题，提出RISC，1982年出现第一代RISC机。MIPS是典型的RISC处理器</p>
<p>RISC的主要特点：</p>
<ol>
<li>
<p>简化的指令系统</p>
<p>​		指令/寻址方式/指令格式少 指令长度一致</p>
</li>
<li>
<p>RR方式工作</p>
<p>​		Load/Store指令可访问存储器外，其余指令只访问寄存器</p>
</li>
<li>
<p>指令周期短</p>
<p>​		流水线方式工作，除Load/Store指令外，其他简单指令都只要一个/不到一个时钟周期</p>
</li>
<li>
<p>采用大量通用寄存器，减少访存次数</p>
</li>
<li>
<p>采用硬连线控制器控制，不用/少用微程序控制</p>
</li>
<li>
<p>采用优化的编译系统，支持高级语言程序</p>
</li>
</ol>
<h4 id="第四章第一讲小结">第四章第一讲小结</h4>
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230611235836329.png" alt="image-20230611235836329" style="zoom:33%;" />
<h3 id="第四章第二讲-程序的机器级表示-以mips为例">第四章第二讲 程序的机器级表示——以MIPS为例</h3>
<ul>
<li>
<p>MIPS的指令格式</p>
<p>​		R型 I型 J型</p>
</li>
<li>
<p>MIPS的寄存器</p>
<p>​		长度 个数 功能分配</p>
</li>
<li>
<p>MIPS的指令寻址方式</p>
<p>​		立即数寻址 寄存器寻址 PC相对寻址 伪直接寻址 偏移寻址</p>
</li>
<li>
<p>MIPS的汇编形式与指令的对应</p>
<p>​		操作码的表示 寄存器的表示 存储器数据表示</p>
</li>
</ul>
<h4 id="mips的指令格式">MIPS的指令格式</h4>
<p>所有指令都是32位宽（字长），按字地址对齐存储，字地址为4的倍数</p>
<p>R型、I型、J型</p>
<h5 id="r型指令">R型指令</h5>
<p><img src="C:%5CUsers%5Ccrc%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20230612002249587.png" alt="image-20230612002249587"></p>
<ul>
<li>参与运算的操作数和结果都在寄存器，R型指令的寻址方式只有<strong>寄存器寻址</strong>一种</li>
<li>R型指令的op全为0，具体功能由func部分确定</li>
<li>rs：第一个源操作数</li>
<li>rt：第二个源操作数</li>
<li>rd：目的寄存器</li>
<li>shamt：对非移位指令为00000。移位指令为移位次数</li>
</ul>
<p>举个栗子：</p>
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230612002824470.png" alt="image-20230612002824470" style="zoom:33%;" />
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230612003003566.png" alt="image-20230612003003566" style="zoom:33%;" />
<h5 id="i型指令">I型指令</h5>
<p><img src="C:%5CUsers%5Ccrc%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20230612003142802.png" alt="image-20230612003142802"></p>
<ul>
<li>指令中包含了一个立即数，故称I型指令</li>
<li>op：确定指令的功能</li>
<li>rs：可以是一个源操作数，寄存器寻址；或者在存取指令中用作基址寄存器，偏移寻址</li>
<li>rt：目的寄存器</li>
<li>immediate：长度为16位的立即数，指令执行时需扩展为32位。根据指令的不同有三种用法：
<ul>
<li>运算类指令：以立即寻址方式提供一个源操作数</li>
<li>存取指令：作为偏移量，与寄存器rs组成偏移寻址方式，提供一个存储器操作数</li>
<li>条件转移指令:作为偏移量，与PC寄存器组成相对寻址方式，提供一个转移目的地址</li>
</ul>
</li>
</ul>
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230612003545045.png" alt="image-20230612003545045" style="zoom:33%;" />
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230612003629348.png" alt="image-20230612003629348" style="zoom:33%;" />
<h5 id="j型指令">J型指令</h5>
<p><img src="C:%5CUsers%5Ccrc%5CAppData%5CRoaming%5CTypora%5Ctypora-user-images%5Cimage-20230612003710396.png" alt="image-20230612003710396"></p>
<ul>
<li>op：确定指令功能</li>
<li>address：转移地址</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">指令</th>
<th style="text-align:center">[31:26]</th>
<th style="text-align:center">[25:0]</th>
<th style="text-align:center">功能</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">j</td>
<td style="text-align:center">000010</td>
<td style="text-align:center">address</td>
<td style="text-align:center">跳转</td>
</tr>
<tr>
<td style="text-align:center">jal</td>
<td style="text-align:center">000011</td>
<td style="text-align:center">address</td>
<td style="text-align:center">调用</td>
</tr>
</tbody>
</table>
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230612004107708.png" alt="image-20230612004107708" style="zoom:33%;" />
<h4 id="mips的通用寄存器">MIPS的通用寄存器</h4>
<p>MIPS有32个长度为32位的通用寄存器（整数寄存器）:</p>
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230612004226730.png" alt="image-20230612004226730" style="zoom:33%;" />
<p>说明：</p>
<ul>
<li>0号寄存器$zero为固定值零，不能改变</li>
<li>1号寄存器$at被汇编器保留为专用</li>
<li>$k0和$k1是留给操作系统专用</li>
<li>$fp是用于过程调用时，访问保存在栈中的数据的指针。但有的编译器(如MIPS 的C编译器)不使用，将它作为$s8寄存器使用</li>
<li>在汇编语言中使用寄存器时可以用寄存器名，也可以用寄存器号，前面加上“$”,例如，$8或$t0</li>
<li>MIPS还提供了32个32位的单精度浮点寄存器$f0~$f31,用于浮点数指令。它们可配对成16个64位的双精度浮点寄存器</li>
</ul>
<p><strong>MIPS寻址方式</strong></p>
<p>寄存器寻址	立即数寻址	偏移寻址	PC相对寻址	伪直接寻址：</p>
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230612004649596.png" alt="image-20230612004649596" style="zoom:33%;" />
<p>举个栗子：</p>
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230612005550772.png" alt="image-20230612005550772" style="zoom:33%;" />
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230612005617357.png" alt="image-20230612005617357" style="zoom:33%;" />
<p>高级语言语句的汇编指令表示：</p>
<p>​		直接举个栗子：</p>
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230612010106227.png" alt="image-20230612010106227" style="zoom:33%;" />
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230612011133671.png" alt="image-20230612011133671" style="zoom:33%;" />
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230612011207580.png" alt="image-20230612011207580" style="zoom:33%;" />
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230612011227449.png" alt="image-20230612011227449" style="zoom:33%;" />
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230612011254484.png" alt="image-20230612011254484" style="zoom:33%;" />
<h4 id="第四章第二讲小结">第四章第二讲小结</h4>
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230612011808731.png" alt="image-20230612011808731" style="zoom:33%;" />
<h3 id="第四章总结">第四章总结</h3>
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230612011831721.png" alt="image-20230612011831721" style="zoom:33%;" />
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230612011848444.png" alt="image-20230612011848444" style="zoom:33%;" />
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230612011901976.png" alt="image-20230612011901976" style="zoom:33%;" />
<hr>
<h2 id="第五章-中央处理器：数据通路和控制器">第五章 中央处理器：数据通路和控制器</h2>
<h3 id="第五章第一讲-cpu的基本功能和基本组成">第五章第一讲 CPU的基本功能和基本组成</h3>
<ul>
<li>CPU的功能及其与计算机性能的关系</li>
<li>指令的四个基本功能</li>
<li>数据通路的基本结构
<ul>
<li>常用的操作元件</li>
<li>常用的状态元件：寄存器组与存储器</li>
</ul>
</li>
<li>数据通路的时序控制</li>
<li>总线结构数据通路中四种基本功能的实现</li>
</ul>
<h4 id="cpu及其与计算机性能的关系">CPU及其与计算机性能的关系</h4>
<p>CPU的实现与计算机性能的关系：</p>
<p>​		计算机性能（程序执行时间）由三个关键因素决定：指令数目、CPI、时钟周期</p>
<p>​		指令数由编译器和ISA决定</p>
<p>​		时钟周期和CPI由CPU的实现以及其他因素来决定</p>
<p><strong>组成指令功能的四种操作</strong></p>
<ul>
<li>取指、取数：读取某一主存单元的内容，并将其装入某个寄存器</li>
<li>存结果：把一个数据从某个寄存器存入给定的主存单元</li>
<li>取数、存结果：把一个数据从某个寄存器送到另一个寄存器或者ALU</li>
<li>PC+1、计算地址、运算：执行算数或逻辑运算</li>
</ul>
<p>RTL：寄存器传送语言，具体规定如下：</p>
<ul>
<li>用R[r]表示寄存器r的内容；</li>
<li>用M[addr]表示主存单元addr的内容；</li>
<li>传送方向用“←”表示，传送源在右，传送目的在左；</li>
<li>对于程序计数器PC，直接用PC表示其内容。</li>
</ul>
<p>举个栗子：</p>
<p>R[$8]←M[R[$9]+4]的含义是：将寄存器9的内容加4得到的内存地址单元的内容送寄存器$8中</p>
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230612094206770.png" alt="image-20230612094206770" style="zoom:33%;" />
<h4 id="数据通路">数据通路</h4>
<p>计算机的五大组成结构：</p>
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230612094301758.png" alt="image-20230612094301758" style="zoom:33%;" />
<p>数据通路：指令执行过程中，数据经过的路径，以及路径上的部件（完整定义：由操作元件和存储元件通过总线方式或分散方式连接而成的进行数据传送、处理和存储的路径。 ）</p>
<p>​		包括：ALU	通用寄存器	状态寄存器	MMU	cache	中断处理逻辑</p>
<p>​		数据通路中专门进行数据运算的部件称为执行部件或功能控件</p>
<p>控制器功能：对指令移码，生成指令对应的控制信号，控制数据通路的动作。控制器向执行部件发出控制信号，是指令的控制部件</p>
<p>数据通路的基本结构：</p>
<ul>
<li>
<p>数据通路由两类元件组成</p>
<ul>
<li>组合逻辑元件（操作元件）</li>
<li>时序逻辑元件（状态元件、存储元件）</li>
</ul>
</li>
<li>
<p>元件间的连接方式有两种方式</p>
<ul>
<li>总线连接方式、</li>
<li>分散连接方式</li>
</ul>
</li>
<li>
<p>数据通路如何构成：由“操作元件”和“存储元件”通过总线方式或分散方式连接而成</p>
</li>
<li>
<p>数据通路的功能：进行数据传送、处理和存储</p>
  <img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230612095649110.png" alt="image-20230612095649110" style="zoom:33%;" />
</li>
</ul>
<p><strong>状态元件</strong>：时序逻辑电路</p>
<p>特点：①存储功能，时钟控制		②输入端状态由时钟决定何时被写入，输出端随时可以读出</p>
<p>定时方式：边沿触发方式：只在时钟边沿改变。上升沿触发/下降沿触发</p>
<p>最简单的状态单元：D触发器，一个时钟输入，一个状态输入，一个状态输出</p>
<p><strong>存储元件</strong>**：寄存器（组）和存储器**</p>
<p>状态单元的输入信息总是在一个时钟的有效边沿到达后的“Clk-to-Q”时才被写入单元中，此时的输出才反映新的状态值</p>
<ul>
<li>寄存器：有一个写使能信号，时钟有效边沿，WE=0时输出不变，WE=1时输出等于输入。每个时钟边沿都写入就不需要WE信号</li>
<li>寄存器组：包含32个寄存器
<ul>
<li>两个读口（组合逻辑操作）： busA和busB分别由RA和RB选择32个寄存器之一输出。地址RA或RB有效后，经一个“取数时间”，busA和busB有效</li>
<li>一个写口（时序逻辑操作）：写使能为1，时钟边沿触发，busW上的值开始被写入RW指定的寄存器中<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230612105322127.png" alt="image-20230612105322127" style="zoom:33%;" /></li>
</ul>
</li>
</ul>
<p><strong>存储元件：理想存储器</strong></p>
<p>理想存储器——简化为带时钟信号Clk的理想模型</p>
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230612105447039.png" alt="image-20230612105447039" style="zoom:50%;" />
<p>Data Out：32位读出数据</p>
<p>Data In：32位写入数据</p>
<p>Address：读写共用一个32位地址</p>
<p>读操作（组合逻辑操作）：地址Address有效，经过一个取数时间&quot;AccessTime&quot;，DataOut数据有效</p>
<p>写操作（时序逻辑操作）：写使能为1，时钟Clk有效边沿到来时，Data In传来的值开始被写入Address指定的存储单元中</p>
<h4 id="数据通路与时序控制">数据通路与时序控制</h4>
<p>同步系统：所有动作由专门时序信号来定时 ，时序信号规定何时发出什么动作</p>
<p>指令周期：读取并执行一条指令的时间</p>
<p>现代计算机的时钟周期：</p>
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230612105921877.png" alt="image-20230612105921877" style="zoom:33%;" />
<p>数据通路由“…+状态元件+操作元件（组合电路）+状态元件+…”组成</p>
<p>​		只有状态元件能存储信息，操作元件从状态元件接收输入，并将输出写入状态元件</p>
<p>​		操作元件的输入为前一时钟状态元件生成的数据，输出为当前时钟状态元件所用的输入数据</p>
<p>假定采用下降沿触发（负跳变）方式：</p>
<p>​		所有状态单元字下降沿写入信息，经过锁存延时后输出有效</p>
<p>​		时钟周期 = Latch Prop + Longest Delay Path + Setup + Clock Skew（时钟偏移）</p>
<p>约束条件：（Latch Prop + Shortest Delay Path - Clock Skew）&gt; Hold Time</p>
<p>​		即：操作元件输出有效信号最快必须在下一级状态元件的输入保持时间之后出现</p>
<h4 id="总线结构数据通路">总线结构数据通路</h4>
<p>四种基本操作的时序：</p>
<ul>
<li>
<p>寄存器间传送数据：Y←R[R0]</p>
<p>R0out，Yin</p>
</li>
<li>
<p>完成算术、逻辑运算：R[R3]←R[R1] + R[R2]</p>
<p>R1out，Yin</p>
<p>R2out，Add，Zin</p>
<p>Zout，R3in</p>
</li>
<li>
<p>从主存取数：R[R2]←M[R[R1]]</p>
<p>R1out，MARin</p>
<p>Read，WMFC（等待MFC）</p>
<p>MDRout，R2in</p>
</li>
<li>
<p>写数到主存：M[R[R1]]←R[R2]</p>
<p>R1out，MARin</p>
<p>R2out，MDRin</p>
<p>Write.WMFC</p>
</li>
</ul>
<p>CPU访存有两种通信方式：</p>
<ul>
<li>早期：直接访问MM，“异步”方式，用MFC（存储器完成）信号进行应答</li>
<li>现在：先Cache后MM，“同步”方式，无需应答信息</li>
</ul>
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230612111452593.png" alt="image-20230612111452593" style="zoom:33%;" />
<h4 id="三总线数据通路">三总线数据通路</h4>
<p>多总线方式，在多个总线上传送不同数据，提高效率</p>
<p>举个栗子：</p>
<p>​		总线AB分分别传送两个源操作数，总线C传送结果</p>
<p>​		单总线中的暂存器Y和Z（ALU两侧）在此可取消——三个总线传不同数据，不会发生冲突</p>
<p>​		采用双口通用寄存器组</p>
<p>​		如何实现：R[R3]←R[R1] op R[R2]</p>
<p>​				R1outA，R2outB，op，R3inC</p>
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230612111712734.png" alt="image-20230612111712734" style="zoom:50%;" />
<p>目前大都采用流水线方式执行指令，单总线或三总线的总线式数据通路很难实现指令流水执行</p>
<h4 id="第五章第一讲小结">第五章第一讲小结</h4>
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230612112102569.png" alt="image-20230612112102569" style="zoom: 33%;" />
<h3 id="第五章第二讲-单周期mips处理器的设计">第五章第二讲 单周期MIPS处理器的设计</h3>
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230612112224369.png" alt="image-20230612112224369" style="zoom:33%;" />
<p>处理器设计涉及到数据通路的设计和控制器的设计</p>
<p>数据通路中有两种元件：由组合逻辑电路实现的操作元件、由时序逻辑电路实现的存储（状态）元件</p>
<h4 id="取指令公共操作及其部件">取指令公共操作及其部件</h4>
<p>每条指令都有公共操作：</p>
<ul>
<li>取指令：M[PC]</li>
<li>更新PC：PC←PC+4</li>
</ul>
<p>转移时，PC内容要再次被更新为“转移目标地址”。单周期CPU的时钟周期以下降开始，在本时钟周期中PC不变</p>
<p>两个操作的顺序：先取指令，再改PC值</p>
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230612113839360.png" alt="image-20230612113839360" style="zoom:33%;" />
<h4 id="加法和减法指令-r-type类型">加法和减法指令（R-type类型）</h4>
<p>R型指令：</p>
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230612114836180.png" alt="image-20230612114836180" style="zoom: 50%;" />
<p><strong>add rd, rs, rt</strong>的RTL描述</p>
<ul>
<li>M[PC]                                                     从PC所指内存单元中取指令</li>
<li>R[rd]←R[rs] + R[rt]
<ul>
<li>rs、rt所指寄存器中取数后相加</li>
<li>结果不溢出，结果送rd所指寄存器</li>
<li>结果溢出，不送结果，转“溢出处理程序”</li>
</ul>
</li>
<li>PC←PC + 4                                           PC加4，使PC指向下一条指令</li>
</ul>
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230612115420129.png" alt="image-20230612115420129" style="zoom: 33%;" />
<h4 id="带立即数的逻辑指令-ori指令">带立即数的逻辑指令（ori指令）</h4>
<p>I型指令：</p>
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230612121513077.png" alt="image-20230612121513077" style="zoom: 33%;" />
<p>作为I-Type指令和逻辑运算指令的代表</p>
<p><strong>ori rt, rs, imm16</strong>的RTL描述</p>
<ul>
<li>M[PC]                                               取指令（公共操作，取指部件完成）</li>
<li>R[rt]←R[rs] or ZeroExt(imm16)        立即数零扩展，并与rs内容做“或”运算</li>
<li>PC←PC + 4                                     计算下地址（公共操作，取指部件完成）</li>
</ul>
<p>零扩展 ZeroExt(imm6)</p>
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230612121601413.png" alt="image-20230612121601413" style="zoom:50%;" />
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230612121708062.png" alt="image-20230612121708062" style="zoom:33%;" />
<h4 id="访存指令中的输入指令-lw指令">访存指令中的输入指令（lw指令）</h4>
<p>还是I型指令</p>
<p><strong>lw rt, ts, imm16</strong>的RTL描述：</p>
<ul>
<li>M[PC]                                                                   取指令</li>
<li>Addr←R[rs] + SignExt(imm16)                             计算存储单元地址（立即数符号扩展）</li>
<li>R[rt]←M[Addr]                                                       装入数据到寄存器rt中</li>
<li>PC←PC + 4                                                          计算下地址（公共操作、取指部件完成）</li>
</ul>
<p>符号位扩展SignExt(imm16)</p>
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230612130228646.png" alt="image-20230612130228646" style="zoom:33%;" />
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230612130305979.png" alt="image-20230612130305979" style="zoom:33%;" />
<h4 id="访存指令中的存数指令-sw">访存指令中的存数指令（sw）</h4>
<p>I型指令</p>
<p><strong>sw rt, rs, imm16</strong>的RTL描述：</p>
<ul>
<li>M[PC]                                                                 取指令（公共操作，取指部件完成）</li>
<li>Addr←R[rs] + SignExt(imm16)                           计算存储单元地址（符号扩展）</li>
<li>M[Addr]←R[rt]                                                     寄存器rt中的内容存到内存单元</li>
<li>PC←PC + 4                                                         计算下地址（公共操作，取指部件完成）</li>
</ul>
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230612131158383.png" alt="image-20230612131158383" style="zoom:33%;" />
<h4 id="分支-条件转移-指令-相等转移：beq">分支（条件转移）指令（相等转移：beq）</h4>
<p>I型指令</p>
<p><strong>beq rs, rt, imm16</strong>的RTL描述：</p>
<ul>
<li>
<p>M[PC]</p>
</li>
<li>
<p>Cond←R[rs] - R[rt]</p>
</li>
<li>
<p>if(Cond eq 0)</p>
<p>​		PC←PC + 4 + (SignExt(imm16) × 4)</p>
<p>else</p>
<p>​		PC←PC + 4</p>
</li>
</ul>
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230612132025674.png" alt="image-20230612132025674" style="zoom:33%;" />
<p>下地址计算逻辑的设计：</p>
<ul>
<li>顺序执行：PC&lt;31:2&gt; = PC&lt;31:2&gt; + 1</li>
<li>转移执行：PC&lt;31:2&gt; = PC&lt;31:2&gt; + 1 +SignExt[imm16]        （SignExt扩展成30位）</li>
<li>取指令时：指令地址 = PC&lt;31:2&gt;串接“00”</li>
</ul>
<h4 id="无条件转移指令">无条件转移指令</h4>
<p>Jump指令（无条件转移指令的代表）</p>
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230612133040894.png" alt="image-20230612133040894" style="zoom:50%;" />
<p><strong>j target</strong>的RTL描述：</p>
<ul>
<li>M[PC]                                                                     取指令（公共操作，取指部件完成）</li>
<li>PC&lt;31:2&gt;←PC&lt;31:28&gt;串接target&lt;25:0&gt;              计算目标地址</li>
</ul>
<p>跳转指令是绝对寻址，转移范围是j指令所在的2^28^=256MB页面内，页面号与j指令相同PC&lt;31:28&gt;</p>
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230612144815621.png" alt="image-20230612144815621" style="zoom: 33%;" />
<p>取指令部件（修改后电路）：</p>
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230612144959111.png" alt="image-20230612144959111" style="zoom:33%;" />
<h4 id="实现7条mips指令的单周期处理器的数据通路">实现7条MIPS指令的单周期处理器的数据通路</h4>
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230612150058156.png" alt="image-20230612150058156" style="zoom:33%;" />
<h4 id="数据通路-中关键路径-load-操作花费的时间">数据通路 中关键路径（Load）操作花费的时间</h4>
<p>Load操作：R[rt]←M[R[rs]+imm16]</p>
<p>寄存器组和理想存储器的定时方式：</p>
<ul>
<li>
<p>写操作时，作为时序逻辑电路</p>
<p>时钟到达前，输入需“建立时间（setup time）”；到达后经“Clk-to-Q”时间后写入数据到达输出端</p>
</li>
<li>
<p>读操作时，作为组合逻辑电路</p>
<p>地址有效后经过“取数时间（access time）”，输出开始有效</p>
</li>
</ul>
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230612151105775.png" alt="image-20230612151105775" style="zoom:33%;" />
<h4 id="数据通路设计小结">数据通路设计小结</h4>
<img src="C:\Users\crc\AppData\Roaming\Typora\typora-user-images\image-20230612152628513.png" alt="image-20230612152628513" style="zoom:33%;" />
<h4 id="单周期数据通路的控制器设计：">单周期数据通路的控制器设计：</h4>
<p>妈的 爷不写了</p>

  </article>

  <!-- prev and next -->
  <div class="flex justify-between mt-4 pt-4
    border-t border-[var(--c-sep)] text-sm
    gap-2 text-[var(--c-50)]
  ">
    <div>
      
        <a href="/2024/04/11/course-note/%E7%A6%BB%E6%95%A3%E6%95%B0%E5%AD%A6%E6%9C%9F%E6%9C%AB%E9%A2%84%E4%B9%A0/"
          class="
            transition-all
            flex justify-center
            hover:-translate-x-1
            hover:text-[var(--c-80)]
          ">
          <iconify-icon width="20" icon="mingcute:left-fill" data-inline="false">
          </iconify-icon>
          2022-2023春季学期离散数学期末预习笔记
        </a>
      
    </div>
    <div>
      
        <a href="/2024/04/11/course-note/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/"
          class="
            flex 
            justify-center
            hover:translate-x-1 
            transition-transform
            hover:text-[var(--c-100)]
          "
        >
          2023-2024秋季学期计算机操作系统期末预习笔记
          <iconify-icon width="20" icon="mingcute:right-fill" data-inline="false"></iconify-icon>
        </a>
      
    </div>
  </div>

  <!-- comment -->
  <div class="article-comments mt-12">
    
  <script src="https://giscus.app/client.js"
  data-repo="421zuoduan/blog-giscus-discussion"
  data-repo-id="R_kgDONKEKag"
  data-category="Announcements"
  data-category-id="DIC_kwDONKEKas4Cj9R8"
  data-mapping="pathname"
  data-strict="0"
  data-reactions-enabled="1"
  data-emit-metadata="1"
  data-input-position="top"
  data-theme="preferred_color_scheme"
  data-lang="zh-CN"
  data-loading="lazy"
  crossorigin="anonymous"
  async>
</script>
<script>
  window.onload = function () {
    console.log("giscus loaded");
    const isDark = document.documentElement.classList.contains("dark");
    const giscusFrame = document.querySelector("iframe.giscus-frame");
    giscusFrame.contentWindow.postMessage(
      {
        giscus: {
          setConfig: {
            theme: isDark ? "dark" : "light",
          },
        },
      },
      "https://giscus.app"
    );
  };
</script>


  </div>
</section>
<!-- js inspect -->

<script src="/lib/clipboard.min.js"></script>


<script async src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-MML-AM_CHTML"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    "HTML-CSS": {
        preferredFont: "TeX",
        availableFonts: ["STIX","TeX"],
        linebreaks: { automatic:true },
        EqnChunk: (MathJax.Hub.Browser.isMobile ? 10 : 50)
    },
    tex2jax: {
        inlineMath: [ ["$", "$"], ["\\(","\\)"] ],
        processEscapes: true,
        ignoreClass: "tex2jax_ignore|dno",
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
        equationNumbers: { autoNumber: "AMS" },
        noUndefined: { attributes: { mathcolor: "red", mathbackground: "#FFEEEE", mathsize: "90%" } },
        Macros: { href: "{}" }
    },
    messageStyle: "none"
  });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for (i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
      }
  });
</script>



<script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
<script>
  $(document).ready(() => {
    const maraidConfig = {
      theme: "default",
      logLevel: 3,
      flowchart: { curve: "linear" },
      gantt: { axisFormat: "%m/%d/%Y" },
      sequence: { actorMargin: 50 },
    };
    mermaid.initialize(maraidConfig);
  });
</script>



<script src="/lib/fancybox/fancybox.umd.min.js"></script>

<script>
  $(document).ready(() => {
    $('.post-content').each(function(i){
      $(this).find('img').each(function(){
        if ($(this).parent().hasClass('fancybox') || $(this).parent().is('a')) return;
        var alt = this.alt;
        var title = this.title;
        if (alt) $(this).after('<span class="fancybox-alt">' + alt + '</span>');
        if (title) $(this).after('<span class="fancybox-title">' + title + '</span>');
        $(this).wrap('<a class="fancybox-img" href="' + this.src + '" data-fancybox=\"gallery\" data-caption="' + alt + '"></a>')
      });
      $(this).find('.fancybox').each(function(){
        $(this).attr('rel', 'article' + i);
      });
    });

    Fancybox.bind('[data-fancybox="gallery"]', {
        // options
    })
  })
</script>

<!-- tocbot begin -->

<script src="/lib/tocbot/tocbot.min.js"></script>

<script>
  $(document).ready(() => {
      tocbot.init({
        // Where to render the table of contents.
        tocSelector: '.post-toc',
        // Where to grab the headings to build the table of contents.
        contentSelector: '.post-content',
        // Which headings to grab inside of the contentSelector element.
        headingSelector: 'h1, h2, h3',
        // For headings inside relative or absolute positioned containers within content.
        hasInnerContainers: true,
    });
  })
</script>
<!-- tocbot end -->

  </main>
  <footer class="flex flex-col mt-18 mb-12 items-center
  text-[var(--c-50)] text-sm">
  <div class="flex flex-row items-center my-12">
    
    
        
        
            
            
        
        <a class="
            hover:text-[var(--c-theme)]
            hover:bg-[var(--c-20)]
            rounded-lg
            p-2
            my-1
            flex flex-row items-center
            group" title="Github" target="_blank" rel="noopener" href="https://www.github.com/421zuoduan">
            <iconify-icon width="28" icon="mingcute:github-fill"></iconify-icon>
        </a>
    
        
        
            
            
        
        <a class="
            hover:text-[var(--c-theme)]
            hover:bg-[var(--c-20)]
            rounded-lg
            p-2
            my-1
            flex flex-row items-center
            group" title="ZhiHu" target="_blank" rel="noopener" href="https://www.zhihu.com/people/ren-jian-lan-xue">
            <iconify-icon width="28" icon="ri:zhihu-line"></iconify-icon>
        </a>
    

  </div>
  <!-- busuanzi -->
  <div class="mb-6">
    
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
<!-- Busuanzi Analytics -->
<div class="flex flex-col items-center mb-2">
  <div class="flex flex-row items-center">
    <iconify-icon width="16" icon="ic:round-person" width="18"></iconify-icon>
    <span class="mr-1">访客 Visitors: </span>
    <span id="busuanzi_value_site_uv"></span>
  </div>
  <div class="flex flex-row items-center">
    <iconify-icon width="16" icon="carbon:view-filled" width="18"></iconify-icon>
    <span class="mx-1">浏览量 Page Views:</span>
    <span id="busuanzi_value_site_pv"></span>
  </div>
</div>
<!-- End Busuanzi Analytics -->


  </div>
  <!-- copyright -->
  <div class="flex flex-row items-center gap-2">
    <a class="hover:underline"
      target="_blank"
      href="https://creativecommons.org/licenses/by-nc-sa/4.0/"
    >
      CC BY-NC-SA 4.0
    </a>
    <span>© 2022-2024</span>
    <a class="hover:underline"
    href="https://github.com/chen-yingfa" 
    target="_blank" 
    rel="noopener noreferrer">陈英发</a>
  </div>
  <!-- powered by -->
  <div class="flex items-center gap-1">
    <span>Powered by</span>
    <a class="hover:underline" 
    href="https://hexo.io/" target="_blank" rel="noopener noreferrer">Hexo</a>
    <span>&</span>
    <a href="https://github.com/chen-yingfa/hexo-theme-fengye" 
    class="hover:underline"
    target="_blank"
      rel="noopener noreferrer"
      >
      枫叶 Fengye
    </a>
  </div>

</footer>

  <div class="
    back-to-top
    fixed right-6
    z-1024
    -bottom-20
    rounded-lg
    font-bold
    py-1 px-2
    text-[var(--c-80)]
    bg-[var(--c-20)]
    cursor-pointer
    text-center
    drop-shadow-md
  ">
    <span class="flex justify-center items-center text-sm">
      <span id="scrollpercent"><span>0</span> %</span>
      <iconify-icon width="18" icon="mingcute:arrow-to-up-fill" id="go-top"></iconify-icon>
    </span>
  </div>
  
<script src="/js/main.js"></script>


  <div class="fixed top-0 bottom-0 left-0 right-0 pointer-events-none print:hidden" id="maple"></div>
</body>

</html>
